646e5727250c15d0801c86f7668cd7b5
"use strict";
/**
 * Tree-sitter based printer for OpenSCAD
 *
 * Converts AST to formatted code using the Doc IR
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.printTree = printTree;
const doc_1 = require("./doc");
/**
 * Print a tree-sitter syntax tree as formatted code
 */
function printTree(tree, options) {
    const doc = printNode(tree.rootNode, options);
    return printDoc(doc, options);
}
/**
 * Print a single AST node
 */
function printNode(node, options) {
    const { type, text } = node;
    // Debug log for unhandled node types
    if (!['source_file', 'module_declaration', 'function_declaration', 'block', 'union_block',
        'if_statement', 'if_block', 'for_statement', 'for_block', 'assignment', 'binary_expression',
        'unary_expression', 'call_expression', 'module_call', 'function_call',
        'transform_chain', 'arguments', 'parameters_declaration', 'parameter', 'parenthesized_assignments',
        'parenthesized_expression', 'ternary_expression', 'index_expression', 'dot_index_expression',
        'list', 'vector', 'array', 'range',
        'comment', 'identifier', 'number', 'decimal', 'integer', 'float', 'string', 'boolean',
        'special_variable', 'use_statement', 'include_statement', 'include_path',
        'assert_statement', 'assert_expression',
        'modifier', 'modifier_chain', 'intersection_for', 'intersection_for_block',
        'use', 'if', 'else', 'module',
        '(', ')', '[', ']', '{', '}', ',', ';', '=', ':', 'for', 'whitespace', '\n',
        '$', '.', '#', '%', '?', '!'].includes(type)) {
        console.log(`[Formatter] Unknown node type: "${type}", text: "${text.substring(0, 50)}"`);
    }
    // Handle different node types
    switch (type) {
        case 'source_file':
            return printSourceFile(node, options);
        case 'module_declaration':
            return printModuleDeclaration(node, options);
        case 'function_declaration':
            return printFunctionDeclaration(node, options);
        case 'block':
        case 'union_block':
            return printBlock(node, options);
        case 'if_statement':
        case 'if_block':
            return printIfStatement(node, options);
        case 'for_statement':
        case 'for_block':
            return printForStatement(node, options);
        case 'intersection_for':
        case 'intersection_for_block':
            return printIntersectionFor(node, options);
        case 'assignment':
            return printAssignment(node, options);
        case 'binary_expression':
            return printBinaryExpression(node, options);
        case 'unary_expression':
            return printUnaryExpression(node, options);
        case 'call_expression':
        case 'module_call':
        case 'function_call':
            return printCallExpression(node, options);
        case 'transform_chain':
            return printTransformChain(node, options);
        case 'arguments':
            return printArguments(node, options);
        case 'list':
        case 'vector':
        case 'array':
            return printList(node, options);
        case 'range':
            return printRange(node, options);
        case 'ternary_expression':
            return printTernaryExpression(node, options);
        case 'index_expression':
            return printIndexExpression(node, options);
        case 'dot_index_expression':
            return printDotIndexExpression(node, options);
        case 'parenthesized_expression':
            return printParenthesizedExpression(node, options);
        case 'use_statement':
            return printUseStatement(node, options);
        case 'assert_statement':
        case 'assert_expression':
            return printAssert(node, options);
        case 'modifier_chain':
            return printModifierChain(node, options);
        case 'comment':
            return text;
        case 'parameter':
        case 'identifier':
        case 'number':
        case 'decimal':
        case 'integer':
        case 'float':
        case 'string':
        case 'boolean':
        case 'special_variable':
            return text;
        default:
            // For unknown nodes, try to print children or fall back to text
            if (node.childCount > 0) {
                return printChildren(node, options);
            }
            return text;
    }
}
function printSourceFile(node, options) {
    const parts = [];
    let prevChild = null;
    for (let i = 0; i < node.childCount; i++) {
        const child = node.child(i);
        if (!child)
            continue;
        // Skip whitespace nodes and semicolons (we'll add them ourselves)
        if (child.type === 'whitespace' || child.type === '\n' || child.type === ';') {
            continue;
        }
        // Check if this is an inline comment (comment on same line as previous statement)
        const isInlineComment = child.type === 'comment' && prevChild &&
            child.startPosition.row === prevChild.endPosition.row;
        if (isInlineComment) {
            // Preserve the original spacing before the inline comment
            // In the AST, prevChild ends before the semicolon, and child (comment) includes whitespace before it
            // We need to calculate: (comment start column) - (prevChild end column) - 1 (for semicolon we added)
            const prevEndCol = prevChild.endPosition.column;
            const commentStartCol = child.startPosition.column;
            const spacingBefore = commentStartCol - prevEndCol - 1; // -1 for the semicolon
            const spacing = ' '.repeat(Math.max(2, spacingBefore));
            parts.push(spacing, printNode(child, options));
            parts.push((0, doc_1.hardline)());
            prevChild = child;
            continue;
        }
        const childDoc = printNode(child, options);
        // Check if there was a blank line before this child in the original code
        let blankLineBefore = false;
        if (prevChild) {
            const lineDiff = child.startPosition.row - prevChild.endPosition.row;
            blankLineBefore = lineDiff > 1;
        }
        // Add blank line if there was one in the original
        if (blankLineBefore && i > 0) {
            parts.push((0, doc_1.hardline)());
        }
        parts.push(childDoc);
        // Add semicolon for statements that need it
        if (needsSemicolon(child.type, child)) {
            parts.push(';');
        }
        // Check if next child is an inline comment on the same line
        // If so, don't add hardline yet
        let nextChild = null;
        for (let j = i + 1; j < node.childCount; j++) {
            const nc = node.child(j);
            if (nc && nc.type !== 'whitespace' && nc.type !== '\n' && nc.type !== ';') {
                nextChild = nc;
                break;
            }
        }
        const nextIsInlineComment = nextChild && nextChild.type === 'comment' &&
            nextChild.startPosition.row === child.endPosition.row;
        if (!nextIsInlineComment) {
            parts.push((0, doc_1.hardline)());
        }
        prevChild = child;
    }
    return (0, doc_1.concat)(parts);
}
function printModuleDeclaration(node, options) {
    const parts = ['module', ' ']; // Always add space after 'module'
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'module') {
            // Skip the 'module' keyword itself
            continue;
        }
        else if (child.type === 'identifier') {
            parts.push(child.text);
        }
        else if (child.type === 'parameters_declaration') {
            parts.push(printParameters(child, options));
        }
        else if (child.type === 'block' || child.type === 'union_block') {
            parts.push(' ', printBlock(child, options));
        }
        else if (child.type === 'whitespace' || child.type === '\n' || child.type === ';') {
            // Skip
            continue;
        }
        else {
            // This handles module body without braces (transform chains, etc.)
            parts.push(' ', printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printFunctionDeclaration(node, options) {
    const parts = ['function'];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'identifier') {
            parts.push(' ', child.text);
        }
        else if (child.type === 'parameters_declaration') {
            parts.push(printParameters(child, options));
        }
        else if (child.type === '=') {
            parts.push(' ', child.text, ' ');
        }
        else if (child.type !== 'function') {
            parts.push(printNode(child, options));
        }
    }
    parts.push(';');
    return (0, doc_1.concat)(parts);
}
function printParameters(node, options) {
    const params = [];
    let firstParamLine = -1;
    let lastParamLine = -1;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === '(' || child.type === ')' || child.type === ',') {
            continue;
        }
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        // Track line positions to detect multiline parameters
        if (firstParamLine === -1) {
            firstParamLine = child.startPosition.row;
        }
        lastParamLine = child.endPosition.row;
        params.push(printNode(child, options));
    }
    if (params.length === 0) {
        return '()';
    }
    // Check if parameters were originally multiline
    const isMultiline = lastParamLine > firstParamLine;
    if (isMultiline) {
        // Format as multiline with Prettier-style formatting
        const parts = [];
        params.forEach((param, i) => {
            parts.push(param);
            if (i < params.length - 1) {
                parts.push(',');
                parts.push((0, doc_1.hardline)());
            }
        });
        return (0, doc_1.concat)([
            '(',
            (0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), ...parts])),
            (0, doc_1.hardline)(),
            ')',
        ]);
    }
    // Keep single-line parameters compact
    return (0, doc_1.concat)([
        '(',
        (0, doc_1.join)(', ', params),
        ')',
    ]);
}
function printBlock(node, options) {
    const items = [];
    let prevChild = null;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === '{' || child.type === '}' || child.type === ';') {
            continue;
        }
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        const stmt = printNode(child, options);
        // Determine if this statement needs a semicolon
        let needsSemi = false;
        if (child.type === 'assignment') {
            needsSemi = true;
        }
        else if (child.type === 'assert_statement' || child.type === 'assert_expression') {
            needsSemi = true;
        }
        else if (child.type === 'transform_chain') {
            // Check if transform_chain ends with a block
            const hasBlock = hasChildOfType(child, 'union_block') || hasChildOfType(child, 'block');
            needsSemi = !hasBlock;
        }
        else if (child.type === 'modifier_chain') {
            // Check if modifier_chain ends with a block
            const hasBlock = hasChildOfType(child, 'union_block') || hasChildOfType(child, 'block');
            needsSemi = !hasBlock;
        }
        else if (child.type === 'module_call' || child.type === 'call_expression') {
            // Module/function calls without blocks need semicolons
            const hasBlock = hasChildOfType(child, 'union_block') || hasChildOfType(child, 'block');
            needsSemi = !hasBlock;
        }
        else if (child.type === 'module_declaration') {
            // Module declarations without blocks need semicolons
            const hasBlock = hasChildOfType(child, 'union_block') || hasChildOfType(child, 'block');
            needsSemi = !hasBlock;
        }
        else if (child.type === 'if_statement' || child.type === 'if_block') {
            // If statements - check if they need semicolons
            // If they have else, printIfStatement handles semicolons
            // Otherwise, need semicolons if no block
            const hasElse = hasChildOfType(child, 'else');
            if (!hasElse) {
                const hasBlock = hasChildOfType(child, 'union_block') || hasChildOfType(child, 'block');
                needsSemi = !hasBlock;
            }
        }
        else if (child.type === 'for_statement' || child.type === 'for_block') {
            // For statements without blocks need semicolons
            const hasBlock = hasChildOfType(child, 'union_block') || hasChildOfType(child, 'block');
            needsSemi = !hasBlock;
        }
        else if (child.type === 'intersection_for' || child.type === 'intersection_for_block') {
            // Intersection_for without blocks need semicolons
            const hasBlock = hasChildOfType(child, 'union_block') || hasChildOfType(child, 'block');
            needsSemi = !hasBlock;
        }
        // Check if there was a blank line before this statement in the original code
        let blankLineBefore = false;
        if (prevChild) {
            const lineDiff = child.startPosition.row - prevChild.endPosition.row;
            blankLineBefore = lineDiff > 1;
        }
        items.push({ stmt, needsSemi, blankLineBefore, child });
        prevChild = child;
    }
    if (items.length === 0) {
        return '{}';
    }
    const statements = [];
    items.forEach(({ stmt, needsSemi, blankLineBefore }, i) => {
        // Add blank line if there was one in the original
        if (blankLineBefore && i > 0) {
            statements.push((0, doc_1.hardline)());
        }
        statements.push(stmt);
        if (needsSemi) {
            statements.push(';');
        }
        // Add hardline after each statement except the last
        if (i < items.length - 1) {
            statements.push((0, doc_1.hardline)());
        }
    });
    return (0, doc_1.group)((0, doc_1.concat)([
        '{',
        (0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), ...statements])),
        (0, doc_1.hardline)(),
        '}',
    ]));
}
function printIfStatement(node, options) {
    const parts = ['if'];
    let hasElse = false;
    let seenElse = false;
    let conditionEndRow = -1;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'if') {
            continue;
        }
        else if (child.type === 'condition' || child.type === 'parenthesized_expression') {
            const conditionChild = child.children[1] || child;
            if (conditionChild) {
                parts.push(' (', printNode(conditionChild, options), ')');
            }
            conditionEndRow = child.endPosition.row;
        }
        else if (child.type === 'block' || child.type === 'union_block') {
            parts.push(' ', printNode(child, options));
        }
        else if (child.type === 'else') {
            // Add semicolon before else if we're not in a block
            if (!hasChildOfType(node, 'union_block') && !hasChildOfType(node, 'block')) {
                parts.push(';');
            }
            parts.push(' else');
            hasElse = true;
            seenElse = true;
        }
        else if (child.type === 'whitespace' || child.type === '\n' || child.type === ';') {
            // Skip
            continue;
        }
        else {
            // This handles any statement/expression in the if body (without braces)
            // Check if body is on a new line
            const isMultiline = conditionEndRow >= 0 && child.startPosition.row > conditionEndRow;
            if (isMultiline && !seenElse) {
                // Body on new line - add newline and indent
                parts.push((0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), printNode(child, options)])));
            }
            else {
                // Body on same line
                parts.push(' ', printNode(child, options));
            }
        }
    }
    // Add final semicolon if there's an else clause (and no block)
    if (hasElse && !hasChildOfType(node, 'union_block') && !hasChildOfType(node, 'block')) {
        parts.push(';');
    }
    return (0, doc_1.concat)(parts);
}
function printForStatement(node, options) {
    const parts = ['for', ' '];
    let block = null;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'for') {
            // Skip the 'for' keyword itself
            continue;
        }
        else if (child.type === 'parenthesized_assignments') {
            // Print the parenthesized assignments (e.g., "(i = [0:10])")
            parts.push(printParenthesizedAssignments(child, options));
        }
        else if (child.type === 'block' || child.type === 'union_block') {
            block = printNode(child, options);
        }
        else if (child.type !== ';' && child.type !== 'whitespace' && child.type !== '\n') {
            parts.push(printNode(child, options));
        }
    }
    if (block) {
        parts.push(' ', block);
    }
    return (0, doc_1.concat)(parts);
}
function printParenthesizedAssignments(node, options) {
    const parts = ['('];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === '(' || child.type === ')') {
            continue;
        }
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        if (child.type === '=') {
            parts.push(' ', child.text, ' ');
        }
        else {
            parts.push(printNode(child, options));
        }
    }
    parts.push(')');
    return (0, doc_1.concat)(parts);
}
function printAssignment(node, options) {
    const parts = [];
    for (let i = 0; i < node.childCount; i++) {
        const child = node.child(i);
        if (!child)
            continue;
        if (child.type === '=') {
            parts.push(' ', child.text, ' ');
        }
        else if (child.type === ';') {
            // Skip semicolons - they'll be added by printSourceFile
            continue;
        }
        else {
            parts.push(printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printTransformChain(node, options) {
    const parts = [];
    const calls = [];
    let firstCallLine = -1;
    let lastCallLine = -1;
    // Track line positions of module/function calls to detect multiline chains
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'module_call' || child.type === 'function_call' || child.type === 'transform_chain') {
            calls.push(child);
            if (firstCallLine === -1) {
                firstCallLine = child.startPosition.row;
            }
            lastCallLine = child.endPosition.row;
        }
    }
    const isMultiline = lastCallLine > firstCallLine;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'module_call' || child.type === 'function_call') {
            // Check if this call is on a new line
            if (isMultiline && parts.length > 0 && child.startPosition.row > firstCallLine) {
                parts.push((0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), printCallExpression(child, options)])));
            }
            else {
                if (parts.length > 0) {
                    parts.push(' ');
                }
                parts.push(printCallExpression(child, options));
            }
        }
        else if (child.type === 'union_block' || child.type === 'block') {
            parts.push(' ', printBlock(child, options));
        }
        else if (child.type === ';') {
            // Skip - semicolon handled by parent based on whether there's a block
            continue;
        }
        else if (child.type === 'transform_chain') {
            // Nested transform chain
            if (isMultiline && parts.length > 0 && child.startPosition.row > firstCallLine) {
                parts.push((0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), printTransformChain(child, options)])));
            }
            else {
                if (parts.length > 0) {
                    parts.push(' ');
                }
                parts.push(printTransformChain(child, options));
            }
        }
        else {
            parts.push(printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printBinaryExpression(node, options) {
    const parts = [];
    for (const child of node.children) {
        if (!child)
            continue;
        if (isOperator(child.text)) {
            parts.push(' ', child.text, ' ');
        }
        else {
            parts.push(printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printUnaryExpression(node, options) {
    const operator = node.child(0);
    const operand = node.child(1);
    if (!operator || !operand) {
        return node.text;
    }
    // Handle negative numbers/expressions (no space for minus)
    if (operator.text === '-') {
        return (0, doc_1.concat)([operator.text, printNode(operand, options)]);
    }
    // Other unary operators (like !)
    return (0, doc_1.concat)([operator.text, printNode(operand, options)]);
}
function printCallExpression(node, options) {
    const parts = [];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'identifier') {
            parts.push(child.text);
        }
        else if (child.type === 'arguments') {
            parts.push(printArguments(child, options));
        }
        else if (child.type !== ';' && child.type !== 'whitespace' && child.type !== '\n') {
            parts.push(printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printArguments(node, options) {
    const args = [];
    let firstArgLine = -1;
    let lastArgLine = -1;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === '(' || child.type === ')' || child.type === ',') {
            continue;
        }
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        // Track line positions to detect multiline arguments
        if (firstArgLine === -1) {
            firstArgLine = child.startPosition.row;
        }
        lastArgLine = child.endPosition.row;
        args.push(printNode(child, options));
    }
    if (args.length === 0) {
        return '()';
    }
    // Check if arguments were originally multiline
    const isMultiline = lastArgLine > firstArgLine;
    if (isMultiline) {
        // Format as multiline with Prettier-style formatting
        const parts = [];
        args.forEach((arg, i) => {
            parts.push(arg);
            if (i < args.length - 1) {
                parts.push(',');
                parts.push((0, doc_1.hardline)());
            }
        });
        return (0, doc_1.concat)([
            '(',
            (0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), ...parts])),
            (0, doc_1.hardline)(),
            ')',
        ]);
    }
    // Keep single-line arguments compact
    return (0, doc_1.concat)([
        '(',
        (0, doc_1.join)(', ', args),
        ')',
    ]);
}
function printList(node, options) {
    const items = [];
    const children = [];
    let firstItemLine = -1;
    let lastItemLine = -1;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === '[' || child.type === ']' || child.type === ',') {
            continue;
        }
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        // Track line positions to detect multiline arrays
        if (firstItemLine === -1) {
            firstItemLine = child.startPosition.row;
        }
        lastItemLine = child.endPosition.row;
        children.push(child);
        items.push(printNode(child, options));
    }
    if (items.length === 0) {
        return '[]';
    }
    // Check if array was originally multiline
    const isMultiline = lastItemLine > firstItemLine;
    if (isMultiline && items.length > 0) {
        // Format as multiline with Prettier-style formatting
        // Each item on its own line with comma, closing bracket unindented
        const parts = [];
        items.forEach((item, i) => {
            parts.push(item);
            if (i < items.length - 1) {
                parts.push(',');
                parts.push((0, doc_1.hardline)());
            }
        });
        return (0, doc_1.concat)([
            '[',
            (0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), ...parts])),
            (0, doc_1.hardline)(),
            ']',
        ]);
    }
    // Keep single-line arrays compact: [1, 2, 3] not [ 1, 2, 3 ]
    return (0, doc_1.concat)([
        '[',
        (0, doc_1.join)(', ', items),
        ']',
    ]);
}
function printRange(node, options) {
    const parts = [];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        if (child.type === ':') {
            parts.push(child.text);
        }
        else {
            parts.push(printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printTernaryExpression(node, options) {
    const parts = [];
    let firstChildLine = -1;
    let lastChildLine = -1;
    // Track line positions to detect multiline ternaries
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        if (firstChildLine === -1) {
            firstChildLine = child.startPosition.row;
        }
        lastChildLine = child.endPosition.row;
    }
    const isMultiline = lastChildLine > firstChildLine;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        if (child.type === '?') {
            if (isMultiline) {
                parts.push((0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), child.text, ' '])));
            }
            else {
                parts.push(' ', child.text, ' ');
            }
        }
        else if (child.type === ':') {
            if (isMultiline) {
                parts.push((0, doc_1.indent)((0, doc_1.concat)([(0, doc_1.hardline)(), child.text, ' '])));
            }
            else {
                parts.push(' ', child.text, ' ');
            }
        }
        else {
            // Regular child node - just add it, indentation handled by ? and : above
            parts.push(printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printIndexExpression(node, options) {
    const parts = [];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        parts.push(printNode(child, options));
    }
    return (0, doc_1.concat)(parts);
}
function printDotIndexExpression(node, options) {
    const parts = [];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        parts.push(printNode(child, options));
    }
    return (0, doc_1.concat)(parts);
}
function printParenthesizedExpression(node, options) {
    const parts = ['('];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === '(' || child.type === ')') {
            continue;
        }
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        parts.push(printNode(child, options));
    }
    parts.push(')');
    return (0, doc_1.concat)(parts);
}
function printUseStatement(node, options) {
    const parts = [];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        if (child.type === 'use') {
            parts.push(child.text, ' ');
        }
        else if (child.type === 'include_path') {
            parts.push(child.text);
        }
        else {
            parts.push(printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printAssert(node, options) {
    const parts = ['assert', '('];
    const args = [];
    let afterParens = null;
    let seenCloseParen = false;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'assert') {
            continue;
        }
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        if (child.type === '(') {
            continue;
        }
        if (child.type === ')') {
            seenCloseParen = true;
            continue;
        }
        if (child.type === ';') {
            continue;
        }
        if (child.type === ',') {
            continue;
        }
        // If we've seen the closing paren, this is the expression after assert
        if (seenCloseParen) {
            afterParens = printNode(child, options);
        }
        else {
            args.push(printNode(child, options));
        }
    }
    // Join arguments with comma and space
    parts.push((0, doc_1.join)(', ', args));
    parts.push(')');
    // Add expression after assert with a space
    if (afterParens) {
        parts.push(' ', afterParens);
    }
    return (0, doc_1.concat)(parts);
}
function printModifierChain(node, options) {
    const parts = [];
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'whitespace' || child.type === '\n') {
            continue;
        }
        if (child.type === 'modifier') {
            // No space after modifier characters like %, #, !, *
            parts.push(child.text);
        }
        else if (child.type === 'module_call' || child.type === 'function_call' || child.type === 'transform_chain') {
            // Just add the node directly, no space before it
            parts.push(printNode(child, options));
        }
        else {
            parts.push(printNode(child, options));
        }
    }
    return (0, doc_1.concat)(parts);
}
function printIntersectionFor(node, options) {
    const parts = ['intersection_for', ' '];
    let block = null;
    for (const child of node.children) {
        if (!child)
            continue;
        if (child.type === 'intersection_for') {
            continue;
        }
        else if (child.type === 'parenthesized_assignments') {
            parts.push(printParenthesizedAssignments(child, options));
        }
        else if (child.type === 'block' || child.type === 'union_block') {
            block = printNode(child, options);
        }
        else if (child.type !== ';' && child.type !== 'whitespace' && child.type !== '\n') {
            parts.push(printNode(child, options));
        }
    }
    if (block) {
        parts.push(' ', block);
    }
    return (0, doc_1.concat)(parts);
}
function printChildren(node, options) {
    const parts = [];
    for (let i = 0; i < node.childCount; i++) {
        const child = node.child(i);
        if (!child)
            continue;
        parts.push(printNode(child, options));
    }
    return (0, doc_1.concat)(parts);
}
// Helper functions
function needsSemicolon(type, node) {
    if (type === 'assignment') {
        return true;
    }
    if (type === 'assert_statement' || type === 'assert_expression') {
        return true;
    }
    if (type === 'transform_chain' && node) {
        // Only add semicolon if transform chain doesn't have a block
        const hasBlock = hasChildOfType(node, 'union_block') || hasChildOfType(node, 'block');
        return !hasBlock;
    }
    if (type === 'modifier_chain' && node) {
        // Modifier chains without blocks need semicolons (like #rotate(...) cylinder(...);)
        const hasBlock = hasChildOfType(node, 'union_block') || hasChildOfType(node, 'block');
        return !hasBlock;
    }
    if (type === 'module_declaration' && node) {
        // Module declarations without blocks need semicolons
        const hasBlock = hasChildOfType(node, 'union_block') || hasChildOfType(node, 'block');
        return !hasBlock;
    }
    if (type === 'if_statement' || type === 'if_block') {
        // If statements with else need semicolons handled in printIfStatement
        // If statements without else and without blocks need semicolons
        if (node) {
            const hasElse = hasChildOfType(node, 'else');
            if (hasElse) {
                return false; // printIfStatement handles semicolons for if-else
            }
            const hasBlock = hasChildOfType(node, 'union_block') || hasChildOfType(node, 'block');
            return !hasBlock;
        }
        return false;
    }
    if (type === 'for_statement' || type === 'for_block') {
        // For statements need semicolons if they don't have blocks
        if (node) {
            const hasBlock = hasChildOfType(node, 'union_block') || hasChildOfType(node, 'block');
            return !hasBlock;
        }
    }
    if (type === 'intersection_for' || type === 'intersection_for_block') {
        // Intersection_for statements need semicolons if they don't have blocks
        if (node) {
            const hasBlock = hasChildOfType(node, 'union_block') || hasChildOfType(node, 'block');
            return !hasBlock;
        }
    }
    return false;
}
function hasChildOfType(node, type) {
    for (const child of node.children) {
        if (child && child.type === type) {
            return true;
        }
    }
    return false;
}
function isOperator(text) {
    return ['+', '-', '*', '/', '%', '==', '!=', '<', '>', '<=', '>=', '&&', '||', '!'].includes(text);
}
/**
 * Convert Doc IR to actual string output
 */
function printDoc(doc, options, mode = 'break') {
    const indentStr = options.useTabs ? '\t' : ' '.repeat(options.indentSize);
    let output = '';
    let indentLevel = 0;
    function print(d, m = mode) {
        if (typeof d === 'string') {
            output += d;
            return;
        }
        if (Array.isArray(d)) {
            for (const part of d) {
                print(part, m);
            }
            return;
        }
        switch (d.type) {
            case 'concat':
                for (const part of d.parts) {
                    print(part, m);
                }
                break;
            case 'line':
                if (d.hard || m === 'break') {
                    output += '\n' + indentStr.repeat(indentLevel);
                }
                else if (!d.soft) {
                    output += ' ';
                }
                break;
            case 'group':
                print(d.contents, d.shouldBreak ? 'break' : 'flat');
                break;
            case 'indent':
                indentLevel++;
                print(d.contents, m);
                indentLevel--;
                break;
            case 'if-break':
                print(m === 'break' ? d.breakContents : d.flatContents, m);
                break;
            case 'fill':
                for (const part of d.parts) {
                    print(part, m);
                }
                break;
        }
    }
    print(doc);
    // Remove trailing whitespace from each line and ensure single trailing newline
    let result = output.split('\n').map(line => line.trimEnd()).join('\n');
    // Ensure exactly one trailing newline (all text files should end with newline)
    // Unless the result is empty
    if (result.trim().length === 0) {
        return '';
    }
    result = result.replace(/\n*$/, '\n');
    return result;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL3phY2hhcnltYXJpb24vc3JjL29wZW5zY2FkLXRhdXJpL2FwcHMvdWkvc3JjL3V0aWxzL2Zvcm1hdHRlci9wcmludGVyLnRzIiwibWFwcGluZ3MiOiI7QUFBQTs7OztHQUlHOztBQVVILDhCQUdDO0FBVEQsK0JBQW9FO0FBR3BFOztHQUVHO0FBQ0gsU0FBZ0IsU0FBUyxDQUFDLElBQXFCLEVBQUUsT0FBZ0M7SUFDL0UsTUFBTSxHQUFHLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDOUMsT0FBTyxRQUFRLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ2hDLENBQUM7QUFFRDs7R0FFRztBQUNILFNBQVMsU0FBUyxDQUFDLElBQXFCLEVBQUUsT0FBZ0M7SUFDeEUsTUFBTSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUM7SUFFNUIscUNBQXFDO0lBQ3JDLElBQUksQ0FBQyxDQUFDLGFBQWEsRUFBRSxvQkFBb0IsRUFBRSxzQkFBc0IsRUFBRSxPQUFPLEVBQUUsYUFBYTtRQUNuRixjQUFjLEVBQUUsVUFBVSxFQUFFLGVBQWUsRUFBRSxXQUFXLEVBQUUsWUFBWSxFQUFFLG1CQUFtQjtRQUMzRixrQkFBa0IsRUFBRSxpQkFBaUIsRUFBRSxhQUFhLEVBQUUsZUFBZTtRQUNyRSxpQkFBaUIsRUFBRSxXQUFXLEVBQUUsd0JBQXdCLEVBQUUsV0FBVyxFQUFFLDJCQUEyQjtRQUNsRywwQkFBMEIsRUFBRSxvQkFBb0IsRUFBRSxrQkFBa0IsRUFBRSxzQkFBc0I7UUFDNUYsTUFBTSxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsT0FBTztRQUNsQyxTQUFTLEVBQUUsWUFBWSxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsU0FBUztRQUNyRixrQkFBa0IsRUFBRSxlQUFlLEVBQUUsbUJBQW1CLEVBQUUsY0FBYztRQUN4RSxrQkFBa0IsRUFBRSxtQkFBbUI7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LEVBQUUsQ0FBQztnQkFDZCxNQUFNO1lBRVIsS0FBSyxVQUFVO2dCQUNiLEtBQUssQ0FBQyxDQUFDLEtBQUssT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsWUFBWSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMzRCxNQUFNO1lBRVIsS0FBSyxNQUFNO2dCQUNULEtBQUssTUFBTSxJQUFJLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO29CQUMzQixLQUFLLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNqQixDQUFDO2dCQUNELE1BQU07UUFDVixDQUFDO0lBQ0gsQ0FBQztJQUVELEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUVYLCtFQUErRTtJQUMvRSxJQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUV2RSwrRUFBK0U7SUFDL0UsNkJBQTZCO0lBQzdCLElBQUksTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUUsQ0FBQztRQUMvQixPQUFPLEVBQUUsQ0FBQztJQUNaLENBQUM7SUFDRCxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUM7SUFFdEMsT0FBTyxNQUFNLENBQUM7QUFDaEIsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMvemFjaGFyeW1hcmlvbi9zcmMvb3BlbnNjYWQtdGF1cmkvYXBwcy91aS9zcmMvdXRpbHMvZm9ybWF0dGVyL3ByaW50ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBUcmVlLXNpdHRlciBiYXNlZCBwcmludGVyIGZvciBPcGVuU0NBRFxuICpcbiAqIENvbnZlcnRzIEFTVCB0byBmb3JtYXR0ZWQgY29kZSB1c2luZyB0aGUgRG9jIElSXG4gKi9cblxuaW1wb3J0IHR5cGUgKiBhcyBUcmVlU2l0dGVyIGZyb20gJ3dlYi10cmVlLXNpdHRlcic7XG5pbXBvcnQgdHlwZSB7IEZvcm1hdE9wdGlvbnMgfSBmcm9tICcuL2luZGV4JztcbmltcG9ydCB7IGNvbmNhdCwgaGFyZGxpbmUsIGluZGVudCwgbGluZSwgZ3JvdXAsIGpvaW4gfSBmcm9tICcuL2RvYyc7XG5pbXBvcnQgdHlwZSB7IERvYyB9IGZyb20gJy4vZG9jJztcblxuLyoqXG4gKiBQcmludCBhIHRyZWUtc2l0dGVyIHN5bnRheCB0cmVlIGFzIGZvcm1hdHRlZCBjb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcmludFRyZWUodHJlZTogVHJlZVNpdHRlci5UcmVlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IHN0cmluZyB7XG4gIGNvbnN0IGRvYyA9IHByaW50Tm9kZSh0cmVlLnJvb3ROb2RlLCBvcHRpb25zKTtcbiAgcmV0dXJuIHByaW50RG9jKGRvYywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogUHJpbnQgYSBzaW5nbGUgQVNUIG5vZGVcbiAqL1xuZnVuY3Rpb24gcHJpbnROb2RlKG5vZGU6IFRyZWVTaXR0ZXIuTm9kZSwgb3B0aW9uczogUmVxdWlyZWQ8Rm9ybWF0T3B0aW9ucz4pOiBEb2Mge1xuICBjb25zdCB7IHR5cGUsIHRleHQgfSA9IG5vZGU7XG5cbiAgLy8gRGVidWcgbG9nIGZvciB1bmhhbmRsZWQgbm9kZSB0eXBlc1xuICBpZiAoIVsnc291cmNlX2ZpbGUnLCAnbW9kdWxlX2RlY2xhcmF0aW9uJywgJ2Z1bmN0aW9uX2RlY2xhcmF0aW9uJywgJ2Jsb2NrJywgJ3VuaW9uX2Jsb2NrJyxcbiAgICAgICAgJ2lmX3N0YXRlbWVudCcsICdpZl9ibG9jaycsICdmb3Jfc3RhdGVtZW50JywgJ2Zvcl9ibG9jaycsICdhc3NpZ25tZW50JywgJ2JpbmFyeV9leHByZXNzaW9uJyxcbiAgICAgICAgJ3VuYXJ5X2V4cHJlc3Npb24nLCAnY2FsbF9leHByZXNzaW9uJywgJ21vZHVsZV9jYWxsJywgJ2Z1bmN0aW9uX2NhbGwnLFxuICAgICAgICAndHJhbnNmb3JtX2NoYWluJywgJ2FyZ3VtZW50cycsICdwYXJhbWV0ZXJzX2RlY2xhcmF0aW9uJywgJ3BhcmFtZXRlcicsICdwYXJlbnRoZXNpemVkX2Fzc2lnbm1lbnRzJyxcbiAgICAgICAgJ3BhcmVudGhlc2l6ZWRfZXhwcmVzc2lvbicsICd0ZXJuYXJ5X2V4cHJlc3Npb24nLCAnaW5kZXhfZXhwcmVzc2lvbicsICdkb3RfaW5kZXhfZXhwcmVzc2lvbicsXG4gICAgICAgICdsaXN0JywgJ3ZlY3RvcicsICdhcnJheScsICdyYW5nZScsXG4gICAgICAgICdjb21tZW50JywgJ2lkZW50aWZpZXInLCAnbnVtYmVyJywgJ2RlY2ltYWwnLCAnaW50ZWdlcicsICdmbG9hdCcsICdzdHJpbmcnLCAnYm9vbGVhbicsXG4gICAgICAgICdzcGVjaWFsX3ZhcmlhYmxlJywgJ3VzZV9zdGF0ZW1lbnQnLCAnaW5jbHVkZV9zdGF0ZW1lbnQnLCAnaW5jbHVkZV9wYXRoJyxcbiAgICAgICAgJ2Fzc2VydF9zdGF0ZW1lbnQnLCAnYXNzZXJ0X2V4cHJlc3Npb24nLFxuICAgICAgICAnbW9kaWZpZXInLCAnbW9kaWZpZXJfY2hhaW4nLCAnaW50ZXJzZWN0aW9uX2ZvcicsICdpbnRlcnNlY3Rpb25fZm9yX2Jsb2NrJyxcbiAgICAgICAgJ3VzZScsICdpZicsICdlbHNlJywgJ21vZHVsZScsXG4gICAgICAgICcoJywgJyknLCAnWycsICddJywgJ3snLCAnfScsICcsJywgJzsnLCAnPScsICc6JywgJ2ZvcicsICd3aGl0ZXNwYWNlJywgJ1xcbicsXG4gICAgICAgICckJywgJy4nLCAnIycsICclJywgJz8nLCAnISddLmluY2x1ZGVzKHR5cGUpKSB7XG4gICAgY29uc29sZS5sb2coYFtGb3JtYXR0ZXJdIFVua25vd24gbm9kZSB0eXBlOiBcIiR7dHlwZX1cIiwgdGV4dDogXCIke3RleHQuc3Vic3RyaW5nKDAsIDUwKX1cImApO1xuICB9XG5cbiAgLy8gSGFuZGxlIGRpZmZlcmVudCBub2RlIHR5cGVzXG4gIHN3aXRjaCAodHlwZSkge1xuICAgIGNhc2UgJ3NvdXJjZV9maWxlJzpcbiAgICAgIHJldHVybiBwcmludFNvdXJjZUZpbGUobm9kZSwgb3B0aW9ucyk7XG5cbiAgICBjYXNlICdtb2R1bGVfZGVjbGFyYXRpb24nOlxuICAgICAgcmV0dXJuIHByaW50TW9kdWxlRGVjbGFyYXRpb24obm9kZSwgb3B0aW9ucyk7XG5cbiAgICBjYXNlICdmdW5jdGlvbl9kZWNsYXJhdGlvbic6XG4gICAgICByZXR1cm4gcHJpbnRGdW5jdGlvbkRlY2xhcmF0aW9uKG5vZGUsIG9wdGlvbnMpO1xuXG4gICAgY2FzZSAnYmxvY2snOlxuICAgIGNhc2UgJ3VuaW9uX2Jsb2NrJzpcbiAgICAgIHJldHVybiBwcmludEJsb2NrKG5vZGUsIG9wdGlvbnMpO1xuXG4gICAgY2FzZSAnaWZfc3RhdGVtZW50JzpcbiAgICBjYXNlICdpZl9ibG9jayc6XG4gICAgICByZXR1cm4gcHJpbnRJZlN0YXRlbWVudChub2RlLCBvcHRpb25zKTtcblxuICAgIGNhc2UgJ2Zvcl9zdGF0ZW1lbnQnOlxuICAgIGNhc2UgJ2Zvcl9ibG9jayc6XG4gICAgICByZXR1cm4gcHJpbnRGb3JTdGF0ZW1lbnQobm9kZSwgb3B0aW9ucyk7XG5cbiAgICBjYXNlICdpbnRlcnNlY3Rpb25fZm9yJzpcbiAgICBjYXNlICdpbnRlcnNlY3Rpb25fZm9yX2Jsb2NrJzpcbiAgICAgIHJldHVybiBwcmludEludGVyc2VjdGlvbkZvcihub2RlLCBvcHRpb25zKTtcblxuICAgIGNhc2UgJ2Fzc2lnbm1lbnQnOlxuICAgICAgcmV0dXJuIHByaW50QXNzaWdubWVudChub2RlLCBvcHRpb25zKTtcblxuICAgIGNhc2UgJ2JpbmFyeV9leHByZXNzaW9uJzpcbiAgICAgIHJldHVybiBwcmludEJpbmFyeUV4cHJlc3Npb24obm9kZSwgb3B0aW9ucyk7XG5cbiAgICBjYXNlICd1bmFyeV9leHByZXNzaW9uJzpcbiAgICAgIHJldHVybiBwcmludFVuYXJ5RXhwcmVzc2lvbihub2RlLCBvcHRpb25zKTtcblxuICAgIGNhc2UgJ2NhbGxfZXhwcmVzc2lvbic6XG4gICAgY2FzZSAnbW9kdWxlX2NhbGwnOlxuICAgIGNhc2UgJ2Z1bmN0aW9uX2NhbGwnOlxuICAgICAgcmV0dXJuIHByaW50Q2FsbEV4cHJlc3Npb24obm9kZSwgb3B0aW9ucyk7XG5cbiAgICBjYXNlICd0cmFuc2Zvcm1fY2hhaW4nOlxuICAgICAgcmV0dXJuIHByaW50VHJhbnNmb3JtQ2hhaW4obm9kZSwgb3B0aW9ucyk7XG5cbiAgICBjYXNlICdhcmd1bWVudHMnOlxuICAgICAgcmV0dXJuIHByaW50QXJndW1lbnRzKG5vZGUsIG9wdGlvbnMpO1xuXG4gICAgY2FzZSAnbGlzdCc6XG4gICAgY2FzZSAndmVjdG9yJzpcbiAgICBjYXNlICdhcnJheSc6XG4gICAgICByZXR1cm4gcHJpbnRMaXN0KG5vZGUsIG9wdGlvbnMpO1xuXG4gICAgY2FzZSAncmFuZ2UnOlxuICAgICAgcmV0dXJuIHByaW50UmFuZ2Uobm9kZSwgb3B0aW9ucyk7XG5cbiAgICBjYXNlICd0ZXJuYXJ5X2V4cHJlc3Npb24nOlxuICAgICAgcmV0dXJuIHByaW50VGVybmFyeUV4cHJlc3Npb24obm9kZSwgb3B0aW9ucyk7XG5cbiAgICBjYXNlICdpbmRleF9leHByZXNzaW9uJzpcbiAgICAgIHJldHVybiBwcmludEluZGV4RXhwcmVzc2lvbihub2RlLCBvcHRpb25zKTtcblxuICAgIGNhc2UgJ2RvdF9pbmRleF9leHByZXNzaW9uJzpcbiAgICAgIHJldHVybiBwcmludERvdEluZGV4RXhwcmVzc2lvbihub2RlLCBvcHRpb25zKTtcblxuICAgIGNhc2UgJ3BhcmVudGhlc2l6ZWRfZXhwcmVzc2lvbic6XG4gICAgICByZXR1cm4gcHJpbnRQYXJlbnRoZXNpemVkRXhwcmVzc2lvbihub2RlLCBvcHRpb25zKTtcblxuICAgIGNhc2UgJ3VzZV9zdGF0ZW1lbnQnOlxuICAgICAgcmV0dXJuIHByaW50VXNlU3RhdGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuXG4gICAgY2FzZSAnYXNzZXJ0X3N0YXRlbWVudCc6XG4gICAgY2FzZSAnYXNzZXJ0X2V4cHJlc3Npb24nOlxuICAgICAgcmV0dXJuIHByaW50QXNzZXJ0KG5vZGUsIG9wdGlvbnMpO1xuXG4gICAgY2FzZSAnbW9kaWZpZXJfY2hhaW4nOlxuICAgICAgcmV0dXJuIHByaW50TW9kaWZpZXJDaGFpbihub2RlLCBvcHRpb25zKTtcblxuICAgIGNhc2UgJ2NvbW1lbnQnOlxuICAgICAgcmV0dXJuIHRleHQ7XG5cbiAgICBjYXNlICdwYXJhbWV0ZXInOlxuICAgIGNhc2UgJ2lkZW50aWZpZXInOlxuICAgIGNhc2UgJ251bWJlcic6XG4gICAgY2FzZSAnZGVjaW1hbCc6XG4gICAgY2FzZSAnaW50ZWdlcic6XG4gICAgY2FzZSAnZmxvYXQnOlxuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgY2FzZSAnYm9vbGVhbic6XG4gICAgY2FzZSAnc3BlY2lhbF92YXJpYWJsZSc6XG4gICAgICByZXR1cm4gdGV4dDtcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBGb3IgdW5rbm93biBub2RlcywgdHJ5IHRvIHByaW50IGNoaWxkcmVuIG9yIGZhbGwgYmFjayB0byB0ZXh0XG4gICAgICBpZiAobm9kZS5jaGlsZENvdW50ID4gMCkge1xuICAgICAgICByZXR1cm4gcHJpbnRDaGlsZHJlbihub2RlLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0ZXh0O1xuICB9XG59XG5cbmZ1bmN0aW9uIHByaW50U291cmNlRmlsZShub2RlOiBUcmVlU2l0dGVyLk5vZGUsIG9wdGlvbnM6IFJlcXVpcmVkPEZvcm1hdE9wdGlvbnM+KTogRG9jIHtcbiAgY29uc3QgcGFydHM6IERvY1tdID0gW107XG4gIGxldCBwcmV2Q2hpbGQ6IFRyZWVTaXR0ZXIuTm9kZSB8IG51bGwgPSBudWxsO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZENvdW50OyBpKyspIHtcbiAgICBjb25zdCBjaGlsZCA9IG5vZGUuY2hpbGQoaSk7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG5cbiAgICAvLyBTa2lwIHdoaXRlc3BhY2Ugbm9kZXMgYW5kIHNlbWljb2xvbnMgKHdlJ2xsIGFkZCB0aGVtIG91cnNlbHZlcylcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ3doaXRlc3BhY2UnIHx8IGNoaWxkLnR5cGUgPT09ICdcXG4nIHx8IGNoaWxkLnR5cGUgPT09ICc7Jykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhbiBpbmxpbmUgY29tbWVudCAoY29tbWVudCBvbiBzYW1lIGxpbmUgYXMgcHJldmlvdXMgc3RhdGVtZW50KVxuICAgIGNvbnN0IGlzSW5saW5lQ29tbWVudCA9IGNoaWxkLnR5cGUgPT09ICdjb21tZW50JyAmJiBwcmV2Q2hpbGQgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5zdGFydFBvc2l0aW9uLnJvdyA9PT0gcHJldkNoaWxkLmVuZFBvc2l0aW9uLnJvdztcblxuICAgIGlmIChpc0lubGluZUNvbW1lbnQpIHtcbiAgICAgIC8vIFByZXNlcnZlIHRoZSBvcmlnaW5hbCBzcGFjaW5nIGJlZm9yZSB0aGUgaW5saW5lIGNvbW1lbnRcbiAgICAgIC8vIEluIHRoZSBBU1QsIHByZXZDaGlsZCBlbmRzIGJlZm9yZSB0aGUgc2VtaWNvbG9uLCBhbmQgY2hpbGQgKGNvbW1lbnQpIGluY2x1ZGVzIHdoaXRlc3BhY2UgYmVmb3JlIGl0XG4gICAgICAvLyBXZSBuZWVkIHRvIGNhbGN1bGF0ZTogKGNvbW1lbnQgc3RhcnQgY29sdW1uKSAtIChwcmV2Q2hpbGQgZW5kIGNvbHVtbikgLSAxIChmb3Igc2VtaWNvbG9uIHdlIGFkZGVkKVxuICAgICAgY29uc3QgcHJldkVuZENvbCA9IHByZXZDaGlsZC5lbmRQb3NpdGlvbi5jb2x1bW47XG4gICAgICBjb25zdCBjb21tZW50U3RhcnRDb2wgPSBjaGlsZC5zdGFydFBvc2l0aW9uLmNvbHVtbjtcbiAgICAgIGNvbnN0IHNwYWNpbmdCZWZvcmUgPSBjb21tZW50U3RhcnRDb2wgLSBwcmV2RW5kQ29sIC0gMTsgLy8gLTEgZm9yIHRoZSBzZW1pY29sb25cbiAgICAgIGNvbnN0IHNwYWNpbmcgPSAnICcucmVwZWF0KE1hdGgubWF4KDIsIHNwYWNpbmdCZWZvcmUpKTtcbiAgICAgIHBhcnRzLnB1c2goc3BhY2luZywgcHJpbnROb2RlKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgICBwYXJ0cy5wdXNoKGhhcmRsaW5lKCkpO1xuICAgICAgcHJldkNoaWxkID0gY2hpbGQ7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBjaGlsZERvYyA9IHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucyk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSB3YXMgYSBibGFuayBsaW5lIGJlZm9yZSB0aGlzIGNoaWxkIGluIHRoZSBvcmlnaW5hbCBjb2RlXG4gICAgbGV0IGJsYW5rTGluZUJlZm9yZSA9IGZhbHNlO1xuICAgIGlmIChwcmV2Q2hpbGQpIHtcbiAgICAgIGNvbnN0IGxpbmVEaWZmID0gY2hpbGQuc3RhcnRQb3NpdGlvbi5yb3cgLSBwcmV2Q2hpbGQuZW5kUG9zaXRpb24ucm93O1xuICAgICAgYmxhbmtMaW5lQmVmb3JlID0gbGluZURpZmYgPiAxO1xuICAgIH1cblxuICAgIC8vIEFkZCBibGFuayBsaW5lIGlmIHRoZXJlIHdhcyBvbmUgaW4gdGhlIG9yaWdpbmFsXG4gICAgaWYgKGJsYW5rTGluZUJlZm9yZSAmJiBpID4gMCkge1xuICAgICAgcGFydHMucHVzaChoYXJkbGluZSgpKTtcbiAgICB9XG5cbiAgICBwYXJ0cy5wdXNoKGNoaWxkRG9jKTtcblxuICAgIC8vIEFkZCBzZW1pY29sb24gZm9yIHN0YXRlbWVudHMgdGhhdCBuZWVkIGl0XG4gICAgaWYgKG5lZWRzU2VtaWNvbG9uKGNoaWxkLnR5cGUsIGNoaWxkKSkge1xuICAgICAgcGFydHMucHVzaCgnOycpO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIG5leHQgY2hpbGQgaXMgYW4gaW5saW5lIGNvbW1lbnQgb24gdGhlIHNhbWUgbGluZVxuICAgIC8vIElmIHNvLCBkb24ndCBhZGQgaGFyZGxpbmUgeWV0XG4gICAgbGV0IG5leHRDaGlsZDogVHJlZVNpdHRlci5Ob2RlIHwgbnVsbCA9IG51bGw7XG4gICAgZm9yIChsZXQgaiA9IGkgKyAxOyBqIDwgbm9kZS5jaGlsZENvdW50OyBqKyspIHtcbiAgICAgIGNvbnN0IG5jID0gbm9kZS5jaGlsZChqKTtcbiAgICAgIGlmIChuYyAmJiBuYy50eXBlICE9PSAnd2hpdGVzcGFjZScgJiYgbmMudHlwZSAhPT0gJ1xcbicgJiYgbmMudHlwZSAhPT0gJzsnKSB7XG4gICAgICAgIG5leHRDaGlsZCA9IG5jO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCBuZXh0SXNJbmxpbmVDb21tZW50ID0gbmV4dENoaWxkICYmIG5leHRDaGlsZC50eXBlID09PSAnY29tbWVudCcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV4dENoaWxkLnN0YXJ0UG9zaXRpb24ucm93ID09PSBjaGlsZC5lbmRQb3NpdGlvbi5yb3c7XG5cbiAgICBpZiAoIW5leHRJc0lubGluZUNvbW1lbnQpIHtcbiAgICAgIHBhcnRzLnB1c2goaGFyZGxpbmUoKSk7XG4gICAgfVxuXG4gICAgcHJldkNoaWxkID0gY2hpbGQ7XG4gIH1cblxuICByZXR1cm4gY29uY2F0KHBhcnRzKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRNb2R1bGVEZWNsYXJhdGlvbihub2RlOiBUcmVlU2l0dGVyLk5vZGUsIG9wdGlvbnM6IFJlcXVpcmVkPEZvcm1hdE9wdGlvbnM+KTogRG9jIHtcbiAgY29uc3QgcGFydHM6IERvY1tdID0gWydtb2R1bGUnLCAnICddOyAgLy8gQWx3YXlzIGFkZCBzcGFjZSBhZnRlciAnbW9kdWxlJ1xuXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuXG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICdtb2R1bGUnKSB7XG4gICAgICAvLyBTa2lwIHRoZSAnbW9kdWxlJyBrZXl3b3JkIGl0c2VsZlxuICAgICAgY29udGludWU7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnaWRlbnRpZmllcicpIHtcbiAgICAgIHBhcnRzLnB1c2goY2hpbGQudGV4dCk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAncGFyYW1ldGVyc19kZWNsYXJhdGlvbicpIHtcbiAgICAgIHBhcnRzLnB1c2gocHJpbnRQYXJhbWV0ZXJzKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnYmxvY2snIHx8IGNoaWxkLnR5cGUgPT09ICd1bmlvbl9ibG9jaycpIHtcbiAgICAgIHBhcnRzLnB1c2goJyAnLCBwcmludEJsb2NrKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnd2hpdGVzcGFjZScgfHwgY2hpbGQudHlwZSA9PT0gJ1xcbicgfHwgY2hpbGQudHlwZSA9PT0gJzsnKSB7XG4gICAgICAvLyBTa2lwXG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVGhpcyBoYW5kbGVzIG1vZHVsZSBib2R5IHdpdGhvdXQgYnJhY2VzICh0cmFuc2Zvcm0gY2hhaW5zLCBldGMuKVxuICAgICAgcGFydHMucHVzaCgnICcsIHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb25jYXQocGFydHMpO1xufVxuXG5mdW5jdGlvbiBwcmludEZ1bmN0aW9uRGVjbGFyYXRpb24obm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFsnZnVuY3Rpb24nXTtcblxuICBmb3IgKGNvbnN0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICBpZiAoIWNoaWxkKSBjb250aW51ZTtcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ2lkZW50aWZpZXInKSB7XG4gICAgICBwYXJ0cy5wdXNoKCcgJywgY2hpbGQudGV4dCk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAncGFyYW1ldGVyc19kZWNsYXJhdGlvbicpIHtcbiAgICAgIHBhcnRzLnB1c2gocHJpbnRQYXJhbWV0ZXJzKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnPScpIHtcbiAgICAgIHBhcnRzLnB1c2goJyAnLCBjaGlsZC50ZXh0LCAnICcpO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGFydHMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9XG4gIH1cblxuICBwYXJ0cy5wdXNoKCc7Jyk7XG4gIHJldHVybiBjb25jYXQocGFydHMpO1xufVxuXG5mdW5jdGlvbiBwcmludFBhcmFtZXRlcnMobm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcmFtczogRG9jW10gPSBbXTtcbiAgbGV0IGZpcnN0UGFyYW1MaW5lID0gLTE7XG4gIGxldCBsYXN0UGFyYW1MaW5lID0gLTE7XG5cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICcoJyB8fCBjaGlsZC50eXBlID09PSAnKScgfHwgY2hpbGQudHlwZSA9PT0gJywnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd3aGl0ZXNwYWNlJyB8fCBjaGlsZC50eXBlID09PSAnXFxuJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgbGluZSBwb3NpdGlvbnMgdG8gZGV0ZWN0IG11bHRpbGluZSBwYXJhbWV0ZXJzXG4gICAgaWYgKGZpcnN0UGFyYW1MaW5lID09PSAtMSkge1xuICAgICAgZmlyc3RQYXJhbUxpbmUgPSBjaGlsZC5zdGFydFBvc2l0aW9uLnJvdztcbiAgICB9XG4gICAgbGFzdFBhcmFtTGluZSA9IGNoaWxkLmVuZFBvc2l0aW9uLnJvdztcblxuICAgIHBhcmFtcy5wdXNoKHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICB9XG5cbiAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJygpJztcbiAgfVxuXG4gIC8vIENoZWNrIGlmIHBhcmFtZXRlcnMgd2VyZSBvcmlnaW5hbGx5IG11bHRpbGluZVxuICBjb25zdCBpc011bHRpbGluZSA9IGxhc3RQYXJhbUxpbmUgPiBmaXJzdFBhcmFtTGluZTtcblxuICBpZiAoaXNNdWx0aWxpbmUpIHtcbiAgICAvLyBGb3JtYXQgYXMgbXVsdGlsaW5lIHdpdGggUHJldHRpZXItc3R5bGUgZm9ybWF0dGluZ1xuICAgIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFtdO1xuXG4gICAgcGFyYW1zLmZvckVhY2goKHBhcmFtLCBpKSA9PiB7XG4gICAgICBwYXJ0cy5wdXNoKHBhcmFtKTtcbiAgICAgIGlmIChpIDwgcGFyYW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcGFydHMucHVzaCgnLCcpO1xuICAgICAgICBwYXJ0cy5wdXNoKGhhcmRsaW5lKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbmNhdChbXG4gICAgICAnKCcsXG4gICAgICBpbmRlbnQoY29uY2F0KFtoYXJkbGluZSgpLCAuLi5wYXJ0c10pKSxcbiAgICAgIGhhcmRsaW5lKCksXG4gICAgICAnKScsXG4gICAgXSk7XG4gIH1cblxuICAvLyBLZWVwIHNpbmdsZS1saW5lIHBhcmFtZXRlcnMgY29tcGFjdFxuICByZXR1cm4gY29uY2F0KFtcbiAgICAnKCcsXG4gICAgam9pbignLCAnLCBwYXJhbXMpLFxuICAgICcpJyxcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIHByaW50QmxvY2sobm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IGl0ZW1zOiBBcnJheTx7IHN0bXQ6IERvYzsgbmVlZHNTZW1pOiBib29sZWFuOyBibGFua0xpbmVCZWZvcmU6IGJvb2xlYW47IGNoaWxkOiBUcmVlU2l0dGVyLk5vZGUgfT4gPSBbXTtcbiAgbGV0IHByZXZDaGlsZDogVHJlZVNpdHRlci5Ob2RlIHwgbnVsbCA9IG51bGw7XG5cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd7JyB8fCBjaGlsZC50eXBlID09PSAnfScgfHwgY2hpbGQudHlwZSA9PT0gJzsnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd3aGl0ZXNwYWNlJyB8fCBjaGlsZC50eXBlID09PSAnXFxuJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RtdCA9IHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucyk7XG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhpcyBzdGF0ZW1lbnQgbmVlZHMgYSBzZW1pY29sb25cbiAgICBsZXQgbmVlZHNTZW1pID0gZmFsc2U7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICdhc3NpZ25tZW50Jykge1xuICAgICAgbmVlZHNTZW1pID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnR5cGUgPT09ICdhc3NlcnRfc3RhdGVtZW50JyB8fCBjaGlsZC50eXBlID09PSAnYXNzZXJ0X2V4cHJlc3Npb24nKSB7XG4gICAgICBuZWVkc1NlbWkgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ3RyYW5zZm9ybV9jaGFpbicpIHtcbiAgICAgIC8vIENoZWNrIGlmIHRyYW5zZm9ybV9jaGFpbiBlbmRzIHdpdGggYSBibG9ja1xuICAgICAgY29uc3QgaGFzQmxvY2sgPSBoYXNDaGlsZE9mVHlwZShjaGlsZCwgJ3VuaW9uX2Jsb2NrJykgfHwgaGFzQ2hpbGRPZlR5cGUoY2hpbGQsICdibG9jaycpO1xuICAgICAgbmVlZHNTZW1pID0gIWhhc0Jsb2NrO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ21vZGlmaWVyX2NoYWluJykge1xuICAgICAgLy8gQ2hlY2sgaWYgbW9kaWZpZXJfY2hhaW4gZW5kcyB3aXRoIGEgYmxvY2tcbiAgICAgIGNvbnN0IGhhc0Jsb2NrID0gaGFzQ2hpbGRPZlR5cGUoY2hpbGQsICd1bmlvbl9ibG9jaycpIHx8IGhhc0NoaWxkT2ZUeXBlKGNoaWxkLCAnYmxvY2snKTtcbiAgICAgIG5lZWRzU2VtaSA9ICFoYXNCbG9jaztcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnR5cGUgPT09ICdtb2R1bGVfY2FsbCcgfHwgY2hpbGQudHlwZSA9PT0gJ2NhbGxfZXhwcmVzc2lvbicpIHtcbiAgICAgIC8vIE1vZHVsZS9mdW5jdGlvbiBjYWxscyB3aXRob3V0IGJsb2NrcyBuZWVkIHNlbWljb2xvbnNcbiAgICAgIGNvbnN0IGhhc0Jsb2NrID0gaGFzQ2hpbGRPZlR5cGUoY2hpbGQsICd1bmlvbl9ibG9jaycpIHx8IGhhc0NoaWxkT2ZUeXBlKGNoaWxkLCAnYmxvY2snKTtcbiAgICAgIG5lZWRzU2VtaSA9ICFoYXNCbG9jaztcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnR5cGUgPT09ICdtb2R1bGVfZGVjbGFyYXRpb24nKSB7XG4gICAgICAvLyBNb2R1bGUgZGVjbGFyYXRpb25zIHdpdGhvdXQgYmxvY2tzIG5lZWQgc2VtaWNvbG9uc1xuICAgICAgY29uc3QgaGFzQmxvY2sgPSBoYXNDaGlsZE9mVHlwZShjaGlsZCwgJ3VuaW9uX2Jsb2NrJykgfHwgaGFzQ2hpbGRPZlR5cGUoY2hpbGQsICdibG9jaycpO1xuICAgICAgbmVlZHNTZW1pID0gIWhhc0Jsb2NrO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ2lmX3N0YXRlbWVudCcgfHwgY2hpbGQudHlwZSA9PT0gJ2lmX2Jsb2NrJykge1xuICAgICAgLy8gSWYgc3RhdGVtZW50cyAtIGNoZWNrIGlmIHRoZXkgbmVlZCBzZW1pY29sb25zXG4gICAgICAvLyBJZiB0aGV5IGhhdmUgZWxzZSwgcHJpbnRJZlN0YXRlbWVudCBoYW5kbGVzIHNlbWljb2xvbnNcbiAgICAgIC8vIE90aGVyd2lzZSwgbmVlZCBzZW1pY29sb25zIGlmIG5vIGJsb2NrXG4gICAgICBjb25zdCBoYXNFbHNlID0gaGFzQ2hpbGRPZlR5cGUoY2hpbGQsICdlbHNlJyk7XG4gICAgICBpZiAoIWhhc0Vsc2UpIHtcbiAgICAgICAgY29uc3QgaGFzQmxvY2sgPSBoYXNDaGlsZE9mVHlwZShjaGlsZCwgJ3VuaW9uX2Jsb2NrJykgfHwgaGFzQ2hpbGRPZlR5cGUoY2hpbGQsICdibG9jaycpO1xuICAgICAgICBuZWVkc1NlbWkgPSAhaGFzQmxvY2s7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnZm9yX3N0YXRlbWVudCcgfHwgY2hpbGQudHlwZSA9PT0gJ2Zvcl9ibG9jaycpIHtcbiAgICAgIC8vIEZvciBzdGF0ZW1lbnRzIHdpdGhvdXQgYmxvY2tzIG5lZWQgc2VtaWNvbG9uc1xuICAgICAgY29uc3QgaGFzQmxvY2sgPSBoYXNDaGlsZE9mVHlwZShjaGlsZCwgJ3VuaW9uX2Jsb2NrJykgfHwgaGFzQ2hpbGRPZlR5cGUoY2hpbGQsICdibG9jaycpO1xuICAgICAgbmVlZHNTZW1pID0gIWhhc0Jsb2NrO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ2ludGVyc2VjdGlvbl9mb3InIHx8IGNoaWxkLnR5cGUgPT09ICdpbnRlcnNlY3Rpb25fZm9yX2Jsb2NrJykge1xuICAgICAgLy8gSW50ZXJzZWN0aW9uX2ZvciB3aXRob3V0IGJsb2NrcyBuZWVkIHNlbWljb2xvbnNcbiAgICAgIGNvbnN0IGhhc0Jsb2NrID0gaGFzQ2hpbGRPZlR5cGUoY2hpbGQsICd1bmlvbl9ibG9jaycpIHx8IGhhc0NoaWxkT2ZUeXBlKGNoaWxkLCAnYmxvY2snKTtcbiAgICAgIG5lZWRzU2VtaSA9ICFoYXNCbG9jaztcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSB3YXMgYSBibGFuayBsaW5lIGJlZm9yZSB0aGlzIHN0YXRlbWVudCBpbiB0aGUgb3JpZ2luYWwgY29kZVxuICAgIGxldCBibGFua0xpbmVCZWZvcmUgPSBmYWxzZTtcbiAgICBpZiAocHJldkNoaWxkKSB7XG4gICAgICBjb25zdCBsaW5lRGlmZiA9IGNoaWxkLnN0YXJ0UG9zaXRpb24ucm93IC0gcHJldkNoaWxkLmVuZFBvc2l0aW9uLnJvdztcbiAgICAgIGJsYW5rTGluZUJlZm9yZSA9IGxpbmVEaWZmID4gMTtcbiAgICB9XG5cbiAgICBpdGVtcy5wdXNoKHsgc3RtdCwgbmVlZHNTZW1pLCBibGFua0xpbmVCZWZvcmUsIGNoaWxkIH0pO1xuICAgIHByZXZDaGlsZCA9IGNoaWxkO1xuICB9XG5cbiAgaWYgKGl0ZW1zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAne30nO1xuICB9XG5cbiAgY29uc3Qgc3RhdGVtZW50czogRG9jW10gPSBbXTtcbiAgaXRlbXMuZm9yRWFjaCgoeyBzdG10LCBuZWVkc1NlbWksIGJsYW5rTGluZUJlZm9yZSB9LCBpKSA9PiB7XG4gICAgLy8gQWRkIGJsYW5rIGxpbmUgaWYgdGhlcmUgd2FzIG9uZSBpbiB0aGUgb3JpZ2luYWxcbiAgICBpZiAoYmxhbmtMaW5lQmVmb3JlICYmIGkgPiAwKSB7XG4gICAgICBzdGF0ZW1lbnRzLnB1c2goaGFyZGxpbmUoKSk7XG4gICAgfVxuXG4gICAgc3RhdGVtZW50cy5wdXNoKHN0bXQpO1xuICAgIGlmIChuZWVkc1NlbWkpIHtcbiAgICAgIHN0YXRlbWVudHMucHVzaCgnOycpO1xuICAgIH1cblxuICAgIC8vIEFkZCBoYXJkbGluZSBhZnRlciBlYWNoIHN0YXRlbWVudCBleGNlcHQgdGhlIGxhc3RcbiAgICBpZiAoaSA8IGl0ZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgIHN0YXRlbWVudHMucHVzaChoYXJkbGluZSgpKTtcbiAgICB9XG4gIH0pO1xuXG4gIHJldHVybiBncm91cChjb25jYXQoW1xuICAgICd7JyxcbiAgICBpbmRlbnQoY29uY2F0KFtoYXJkbGluZSgpLCAuLi5zdGF0ZW1lbnRzXSkpLFxuICAgIGhhcmRsaW5lKCksXG4gICAgJ30nLFxuICBdKSk7XG59XG5cbmZ1bmN0aW9uIHByaW50SWZTdGF0ZW1lbnQobm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFsnaWYnXTtcbiAgbGV0IGhhc0Vsc2UgPSBmYWxzZTtcbiAgbGV0IHNlZW5FbHNlID0gZmFsc2U7XG4gIGxldCBjb25kaXRpb25FbmRSb3cgPSAtMTtcblxuICBmb3IgKGNvbnN0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICBpZiAoIWNoaWxkKSBjb250aW51ZTtcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ2lmJykge1xuICAgICAgY29udGludWU7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnY29uZGl0aW9uJyB8fCBjaGlsZC50eXBlID09PSAncGFyZW50aGVzaXplZF9leHByZXNzaW9uJykge1xuICAgICAgY29uc3QgY29uZGl0aW9uQ2hpbGQgPSBjaGlsZC5jaGlsZHJlblsxXSB8fCBjaGlsZDtcbiAgICAgIGlmIChjb25kaXRpb25DaGlsZCkge1xuICAgICAgICBwYXJ0cy5wdXNoKCcgKCcsIHByaW50Tm9kZShjb25kaXRpb25DaGlsZCwgb3B0aW9ucyksICcpJyk7XG4gICAgICB9XG4gICAgICBjb25kaXRpb25FbmRSb3cgPSBjaGlsZC5lbmRQb3NpdGlvbi5yb3c7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnYmxvY2snIHx8IGNoaWxkLnR5cGUgPT09ICd1bmlvbl9ibG9jaycpIHtcbiAgICAgIHBhcnRzLnB1c2goJyAnLCBwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnR5cGUgPT09ICdlbHNlJykge1xuICAgICAgLy8gQWRkIHNlbWljb2xvbiBiZWZvcmUgZWxzZSBpZiB3ZSdyZSBub3QgaW4gYSBibG9ja1xuICAgICAgaWYgKCFoYXNDaGlsZE9mVHlwZShub2RlLCAndW5pb25fYmxvY2snKSAmJiAhaGFzQ2hpbGRPZlR5cGUobm9kZSwgJ2Jsb2NrJykpIHtcbiAgICAgICAgcGFydHMucHVzaCgnOycpO1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaCgnIGVsc2UnKTtcbiAgICAgIGhhc0Vsc2UgPSB0cnVlO1xuICAgICAgc2VlbkVsc2UgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ3doaXRlc3BhY2UnIHx8IGNoaWxkLnR5cGUgPT09ICdcXG4nIHx8IGNoaWxkLnR5cGUgPT09ICc7Jykge1xuICAgICAgLy8gU2tpcFxuICAgICAgY29udGludWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoaXMgaGFuZGxlcyBhbnkgc3RhdGVtZW50L2V4cHJlc3Npb24gaW4gdGhlIGlmIGJvZHkgKHdpdGhvdXQgYnJhY2VzKVxuICAgICAgLy8gQ2hlY2sgaWYgYm9keSBpcyBvbiBhIG5ldyBsaW5lXG4gICAgICBjb25zdCBpc011bHRpbGluZSA9IGNvbmRpdGlvbkVuZFJvdyA+PSAwICYmIGNoaWxkLnN0YXJ0UG9zaXRpb24ucm93ID4gY29uZGl0aW9uRW5kUm93O1xuXG4gICAgICBpZiAoaXNNdWx0aWxpbmUgJiYgIXNlZW5FbHNlKSB7XG4gICAgICAgIC8vIEJvZHkgb24gbmV3IGxpbmUgLSBhZGQgbmV3bGluZSBhbmQgaW5kZW50XG4gICAgICAgIHBhcnRzLnB1c2goaW5kZW50KGNvbmNhdChbaGFyZGxpbmUoKSwgcHJpbnROb2RlKGNoaWxkLCBvcHRpb25zKV0pKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBCb2R5IG9uIHNhbWUgbGluZVxuICAgICAgICBwYXJ0cy5wdXNoKCcgJywgcHJpbnROb2RlKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLy8gQWRkIGZpbmFsIHNlbWljb2xvbiBpZiB0aGVyZSdzIGFuIGVsc2UgY2xhdXNlIChhbmQgbm8gYmxvY2spXG4gIGlmIChoYXNFbHNlICYmICFoYXNDaGlsZE9mVHlwZShub2RlLCAndW5pb25fYmxvY2snKSAmJiAhaGFzQ2hpbGRPZlR5cGUobm9kZSwgJ2Jsb2NrJykpIHtcbiAgICBwYXJ0cy5wdXNoKCc7Jyk7XG4gIH1cblxuICByZXR1cm4gY29uY2F0KHBhcnRzKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRGb3JTdGF0ZW1lbnQobm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFsnZm9yJywgJyAnXTtcbiAgbGV0IGJsb2NrOiBEb2MgfCBudWxsID0gbnVsbDtcblxuICBmb3IgKGNvbnN0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICBpZiAoIWNoaWxkKSBjb250aW51ZTtcblxuICAgIGlmIChjaGlsZC50eXBlID09PSAnZm9yJykge1xuICAgICAgLy8gU2tpcCB0aGUgJ2Zvcicga2V5d29yZCBpdHNlbGZcbiAgICAgIGNvbnRpbnVlO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ3BhcmVudGhlc2l6ZWRfYXNzaWdubWVudHMnKSB7XG4gICAgICAvLyBQcmludCB0aGUgcGFyZW50aGVzaXplZCBhc3NpZ25tZW50cyAoZS5nLiwgXCIoaSA9IFswOjEwXSlcIilcbiAgICAgIHBhcnRzLnB1c2gocHJpbnRQYXJlbnRoZXNpemVkQXNzaWdubWVudHMoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnR5cGUgPT09ICdibG9jaycgfHwgY2hpbGQudHlwZSA9PT0gJ3VuaW9uX2Jsb2NrJykge1xuICAgICAgYmxvY2sgPSBwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSAhPT0gJzsnICYmIGNoaWxkLnR5cGUgIT09ICd3aGl0ZXNwYWNlJyAmJiBjaGlsZC50eXBlICE9PSAnXFxuJykge1xuICAgICAgcGFydHMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9XG4gIH1cblxuICBpZiAoYmxvY2spIHtcbiAgICBwYXJ0cy5wdXNoKCcgJywgYmxvY2spO1xuICB9XG5cbiAgcmV0dXJuIGNvbmNhdChwYXJ0cyk7XG59XG5cbmZ1bmN0aW9uIHByaW50UGFyZW50aGVzaXplZEFzc2lnbm1lbnRzKG5vZGU6IFRyZWVTaXR0ZXIuTm9kZSwgb3B0aW9uczogUmVxdWlyZWQ8Rm9ybWF0T3B0aW9ucz4pOiBEb2Mge1xuICBjb25zdCBwYXJ0czogRG9jW10gPSBbJygnXTtcblxuICBmb3IgKGNvbnN0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICBpZiAoIWNoaWxkKSBjb250aW51ZTtcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJygnIHx8IGNoaWxkLnR5cGUgPT09ICcpJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChjaGlsZC50eXBlID09PSAnd2hpdGVzcGFjZScgfHwgY2hpbGQudHlwZSA9PT0gJ1xcbicpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJz0nKSB7XG4gICAgICBwYXJ0cy5wdXNoKCcgJywgY2hpbGQudGV4dCwgJyAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydHMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9XG4gIH1cblxuICBwYXJ0cy5wdXNoKCcpJyk7XG4gIHJldHVybiBjb25jYXQocGFydHMpO1xufVxuXG5mdW5jdGlvbiBwcmludEFzc2lnbm1lbnQobm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFtdO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbm9kZS5jaGlsZENvdW50OyBpKyspIHtcbiAgICBjb25zdCBjaGlsZCA9IG5vZGUuY2hpbGQoaSk7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG5cbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJz0nKSB7XG4gICAgICBwYXJ0cy5wdXNoKCcgJywgY2hpbGQudGV4dCwgJyAnKTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnR5cGUgPT09ICc7Jykge1xuICAgICAgLy8gU2tpcCBzZW1pY29sb25zIC0gdGhleSdsbCBiZSBhZGRlZCBieSBwcmludFNvdXJjZUZpbGVcbiAgICAgIGNvbnRpbnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYXJ0cy5wdXNoKHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb25jYXQocGFydHMpO1xufVxuXG5mdW5jdGlvbiBwcmludFRyYW5zZm9ybUNoYWluKG5vZGU6IFRyZWVTaXR0ZXIuTm9kZSwgb3B0aW9uczogUmVxdWlyZWQ8Rm9ybWF0T3B0aW9ucz4pOiBEb2Mge1xuICBjb25zdCBwYXJ0czogRG9jW10gPSBbXTtcbiAgY29uc3QgY2FsbHM6IFRyZWVTaXR0ZXIuTm9kZVtdID0gW107XG4gIGxldCBmaXJzdENhbGxMaW5lID0gLTE7XG4gIGxldCBsYXN0Q2FsbExpbmUgPSAtMTtcblxuICAvLyBUcmFjayBsaW5lIHBvc2l0aW9ucyBvZiBtb2R1bGUvZnVuY3Rpb24gY2FsbHMgdG8gZGV0ZWN0IG11bHRpbGluZSBjaGFpbnNcbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICdtb2R1bGVfY2FsbCcgfHwgY2hpbGQudHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnIHx8IGNoaWxkLnR5cGUgPT09ICd0cmFuc2Zvcm1fY2hhaW4nKSB7XG4gICAgICBjYWxscy5wdXNoKGNoaWxkKTtcbiAgICAgIGlmIChmaXJzdENhbGxMaW5lID09PSAtMSkge1xuICAgICAgICBmaXJzdENhbGxMaW5lID0gY2hpbGQuc3RhcnRQb3NpdGlvbi5yb3c7XG4gICAgICB9XG4gICAgICBsYXN0Q2FsbExpbmUgPSBjaGlsZC5lbmRQb3NpdGlvbi5yb3c7XG4gICAgfVxuICB9XG5cbiAgY29uc3QgaXNNdWx0aWxpbmUgPSBsYXN0Q2FsbExpbmUgPiBmaXJzdENhbGxMaW5lO1xuXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuXG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICdtb2R1bGVfY2FsbCcgfHwgY2hpbGQudHlwZSA9PT0gJ2Z1bmN0aW9uX2NhbGwnKSB7XG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGNhbGwgaXMgb24gYSBuZXcgbGluZVxuICAgICAgaWYgKGlzTXVsdGlsaW5lICYmIHBhcnRzLmxlbmd0aCA+IDAgJiYgY2hpbGQuc3RhcnRQb3NpdGlvbi5yb3cgPiBmaXJzdENhbGxMaW5lKSB7XG4gICAgICAgIHBhcnRzLnB1c2goaW5kZW50KGNvbmNhdChbaGFyZGxpbmUoKSwgcHJpbnRDYWxsRXhwcmVzc2lvbihjaGlsZCwgb3B0aW9ucyldKSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKCcgJyk7XG4gICAgICAgIH1cbiAgICAgICAgcGFydHMucHVzaChwcmludENhbGxFeHByZXNzaW9uKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAndW5pb25fYmxvY2snIHx8IGNoaWxkLnR5cGUgPT09ICdibG9jaycpIHtcbiAgICAgIHBhcnRzLnB1c2goJyAnLCBwcmludEJsb2NrKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnOycpIHtcbiAgICAgIC8vIFNraXAgLSBzZW1pY29sb24gaGFuZGxlZCBieSBwYXJlbnQgYmFzZWQgb24gd2hldGhlciB0aGVyZSdzIGEgYmxvY2tcbiAgICAgIGNvbnRpbnVlO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ3RyYW5zZm9ybV9jaGFpbicpIHtcbiAgICAgIC8vIE5lc3RlZCB0cmFuc2Zvcm0gY2hhaW5cbiAgICAgIGlmIChpc011bHRpbGluZSAmJiBwYXJ0cy5sZW5ndGggPiAwICYmIGNoaWxkLnN0YXJ0UG9zaXRpb24ucm93ID4gZmlyc3RDYWxsTGluZSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGluZGVudChjb25jYXQoW2hhcmRsaW5lKCksIHByaW50VHJhbnNmb3JtQ2hhaW4oY2hpbGQsIG9wdGlvbnMpXSkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgcGFydHMucHVzaCgnICcpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2gocHJpbnRUcmFuc2Zvcm1DaGFpbihjaGlsZCwgb3B0aW9ucykpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwYXJ0cy5wdXNoKHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb25jYXQocGFydHMpO1xufVxuXG5mdW5jdGlvbiBwcmludEJpbmFyeUV4cHJlc3Npb24obm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuICAgIGlmIChpc09wZXJhdG9yKGNoaWxkLnRleHQpKSB7XG4gICAgICBwYXJ0cy5wdXNoKCcgJywgY2hpbGQudGV4dCwgJyAnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydHMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29uY2F0KHBhcnRzKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRVbmFyeUV4cHJlc3Npb24obm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IG9wZXJhdG9yID0gbm9kZS5jaGlsZCgwKTtcbiAgY29uc3Qgb3BlcmFuZCA9IG5vZGUuY2hpbGQoMSk7XG5cbiAgaWYgKCFvcGVyYXRvciB8fCAhb3BlcmFuZCkge1xuICAgIHJldHVybiBub2RlLnRleHQ7XG4gIH1cblxuICAvLyBIYW5kbGUgbmVnYXRpdmUgbnVtYmVycy9leHByZXNzaW9ucyAobm8gc3BhY2UgZm9yIG1pbnVzKVxuICBpZiAob3BlcmF0b3IudGV4dCA9PT0gJy0nKSB7XG4gICAgcmV0dXJuIGNvbmNhdChbb3BlcmF0b3IudGV4dCwgcHJpbnROb2RlKG9wZXJhbmQsIG9wdGlvbnMpXSk7XG4gIH1cblxuICAvLyBPdGhlciB1bmFyeSBvcGVyYXRvcnMgKGxpa2UgISlcbiAgcmV0dXJuIGNvbmNhdChbb3BlcmF0b3IudGV4dCwgcHJpbnROb2RlKG9wZXJhbmQsIG9wdGlvbnMpXSk7XG59XG5cbmZ1bmN0aW9uIHByaW50Q2FsbEV4cHJlc3Npb24obm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuICAgIGlmIChjaGlsZC50eXBlID09PSAnaWRlbnRpZmllcicpIHtcbiAgICAgIHBhcnRzLnB1c2goY2hpbGQudGV4dCk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnYXJndW1lbnRzJykge1xuICAgICAgcGFydHMucHVzaChwcmludEFyZ3VtZW50cyhjaGlsZCwgb3B0aW9ucykpO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSAhPT0gJzsnICYmIGNoaWxkLnR5cGUgIT09ICd3aGl0ZXNwYWNlJyAmJiBjaGlsZC50eXBlICE9PSAnXFxuJykge1xuICAgICAgcGFydHMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29uY2F0KHBhcnRzKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRBcmd1bWVudHMobm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IGFyZ3M6IERvY1tdID0gW107XG4gIGxldCBmaXJzdEFyZ0xpbmUgPSAtMTtcbiAgbGV0IGxhc3RBcmdMaW5lID0gLTE7XG5cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICcoJyB8fCBjaGlsZC50eXBlID09PSAnKScgfHwgY2hpbGQudHlwZSA9PT0gJywnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd3aGl0ZXNwYWNlJyB8fCBjaGlsZC50eXBlID09PSAnXFxuJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgbGluZSBwb3NpdGlvbnMgdG8gZGV0ZWN0IG11bHRpbGluZSBhcmd1bWVudHNcbiAgICBpZiAoZmlyc3RBcmdMaW5lID09PSAtMSkge1xuICAgICAgZmlyc3RBcmdMaW5lID0gY2hpbGQuc3RhcnRQb3NpdGlvbi5yb3c7XG4gICAgfVxuICAgIGxhc3RBcmdMaW5lID0gY2hpbGQuZW5kUG9zaXRpb24ucm93O1xuXG4gICAgYXJncy5wdXNoKHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICB9XG5cbiAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICcoKSc7XG4gIH1cblxuICAvLyBDaGVjayBpZiBhcmd1bWVudHMgd2VyZSBvcmlnaW5hbGx5IG11bHRpbGluZVxuICBjb25zdCBpc011bHRpbGluZSA9IGxhc3RBcmdMaW5lID4gZmlyc3RBcmdMaW5lO1xuXG4gIGlmIChpc011bHRpbGluZSkge1xuICAgIC8vIEZvcm1hdCBhcyBtdWx0aWxpbmUgd2l0aCBQcmV0dGllci1zdHlsZSBmb3JtYXR0aW5nXG4gICAgY29uc3QgcGFydHM6IERvY1tdID0gW107XG5cbiAgICBhcmdzLmZvckVhY2goKGFyZywgaSkgPT4ge1xuICAgICAgcGFydHMucHVzaChhcmcpO1xuICAgICAgaWYgKGkgPCBhcmdzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcGFydHMucHVzaCgnLCcpO1xuICAgICAgICBwYXJ0cy5wdXNoKGhhcmRsaW5lKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbmNhdChbXG4gICAgICAnKCcsXG4gICAgICBpbmRlbnQoY29uY2F0KFtoYXJkbGluZSgpLCAuLi5wYXJ0c10pKSxcbiAgICAgIGhhcmRsaW5lKCksXG4gICAgICAnKScsXG4gICAgXSk7XG4gIH1cblxuICAvLyBLZWVwIHNpbmdsZS1saW5lIGFyZ3VtZW50cyBjb21wYWN0XG4gIHJldHVybiBjb25jYXQoW1xuICAgICcoJyxcbiAgICBqb2luKCcsICcsIGFyZ3MpLFxuICAgICcpJyxcbiAgXSk7XG59XG5cbmZ1bmN0aW9uIHByaW50TGlzdChub2RlOiBUcmVlU2l0dGVyLk5vZGUsIG9wdGlvbnM6IFJlcXVpcmVkPEZvcm1hdE9wdGlvbnM+KTogRG9jIHtcbiAgY29uc3QgaXRlbXM6IERvY1tdID0gW107XG4gIGNvbnN0IGNoaWxkcmVuOiBUcmVlU2l0dGVyLk5vZGVbXSA9IFtdO1xuICBsZXQgZmlyc3RJdGVtTGluZSA9IC0xO1xuICBsZXQgbGFzdEl0ZW1MaW5lID0gLTE7XG5cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICdbJyB8fCBjaGlsZC50eXBlID09PSAnXScgfHwgY2hpbGQudHlwZSA9PT0gJywnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd3aGl0ZXNwYWNlJyB8fCBjaGlsZC50eXBlID09PSAnXFxuJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gVHJhY2sgbGluZSBwb3NpdGlvbnMgdG8gZGV0ZWN0IG11bHRpbGluZSBhcnJheXNcbiAgICBpZiAoZmlyc3RJdGVtTGluZSA9PT0gLTEpIHtcbiAgICAgIGZpcnN0SXRlbUxpbmUgPSBjaGlsZC5zdGFydFBvc2l0aW9uLnJvdztcbiAgICB9XG4gICAgbGFzdEl0ZW1MaW5lID0gY2hpbGQuZW5kUG9zaXRpb24ucm93O1xuXG4gICAgY2hpbGRyZW4ucHVzaChjaGlsZCk7XG4gICAgaXRlbXMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgfVxuXG4gIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ1tdJztcbiAgfVxuXG4gIC8vIENoZWNrIGlmIGFycmF5IHdhcyBvcmlnaW5hbGx5IG11bHRpbGluZVxuICBjb25zdCBpc011bHRpbGluZSA9IGxhc3RJdGVtTGluZSA+IGZpcnN0SXRlbUxpbmU7XG5cbiAgaWYgKGlzTXVsdGlsaW5lICYmIGl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAvLyBGb3JtYXQgYXMgbXVsdGlsaW5lIHdpdGggUHJldHRpZXItc3R5bGUgZm9ybWF0dGluZ1xuICAgIC8vIEVhY2ggaXRlbSBvbiBpdHMgb3duIGxpbmUgd2l0aCBjb21tYSwgY2xvc2luZyBicmFja2V0IHVuaW5kZW50ZWRcbiAgICBjb25zdCBwYXJ0czogRG9jW10gPSBbXTtcblxuICAgIGl0ZW1zLmZvckVhY2goKGl0ZW0sIGkpID0+IHtcbiAgICAgIHBhcnRzLnB1c2goaXRlbSk7XG4gICAgICBpZiAoaSA8IGl0ZW1zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgcGFydHMucHVzaCgnLCcpO1xuICAgICAgICBwYXJ0cy5wdXNoKGhhcmRsaW5lKCkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIGNvbmNhdChbXG4gICAgICAnWycsXG4gICAgICBpbmRlbnQoY29uY2F0KFtoYXJkbGluZSgpLCAuLi5wYXJ0c10pKSxcbiAgICAgIGhhcmRsaW5lKCksXG4gICAgICAnXScsXG4gICAgXSk7XG4gIH1cblxuICAvLyBLZWVwIHNpbmdsZS1saW5lIGFycmF5cyBjb21wYWN0OiBbMSwgMiwgM10gbm90IFsgMSwgMiwgMyBdXG4gIHJldHVybiBjb25jYXQoW1xuICAgICdbJyxcbiAgICBqb2luKCcsICcsIGl0ZW1zKSxcbiAgICAnXScsXG4gIF0pO1xufVxuXG5mdW5jdGlvbiBwcmludFJhbmdlKG5vZGU6IFRyZWVTaXR0ZXIuTm9kZSwgb3B0aW9uczogUmVxdWlyZWQ8Rm9ybWF0T3B0aW9ucz4pOiBEb2Mge1xuICBjb25zdCBwYXJ0czogRG9jW10gPSBbXTtcblxuICBmb3IgKGNvbnN0IGNoaWxkIG9mIG5vZGUuY2hpbGRyZW4pIHtcbiAgICBpZiAoIWNoaWxkKSBjb250aW51ZTtcbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ3doaXRlc3BhY2UnIHx8IGNoaWxkLnR5cGUgPT09ICdcXG4nKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICc6Jykge1xuICAgICAgcGFydHMucHVzaChjaGlsZC50ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydHMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29uY2F0KHBhcnRzKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRUZXJuYXJ5RXhwcmVzc2lvbihub2RlOiBUcmVlU2l0dGVyLk5vZGUsIG9wdGlvbnM6IFJlcXVpcmVkPEZvcm1hdE9wdGlvbnM+KTogRG9jIHtcbiAgY29uc3QgcGFydHM6IERvY1tdID0gW107XG4gIGxldCBmaXJzdENoaWxkTGluZSA9IC0xO1xuICBsZXQgbGFzdENoaWxkTGluZSA9IC0xO1xuXG4gIC8vIFRyYWNrIGxpbmUgcG9zaXRpb25zIHRvIGRldGVjdCBtdWx0aWxpbmUgdGVybmFyaWVzXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuICAgIGlmIChjaGlsZC50eXBlID09PSAnd2hpdGVzcGFjZScgfHwgY2hpbGQudHlwZSA9PT0gJ1xcbicpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoZmlyc3RDaGlsZExpbmUgPT09IC0xKSB7XG4gICAgICBmaXJzdENoaWxkTGluZSA9IGNoaWxkLnN0YXJ0UG9zaXRpb24ucm93O1xuICAgIH1cbiAgICBsYXN0Q2hpbGRMaW5lID0gY2hpbGQuZW5kUG9zaXRpb24ucm93O1xuICB9XG5cbiAgY29uc3QgaXNNdWx0aWxpbmUgPSBsYXN0Q2hpbGRMaW5lID4gZmlyc3RDaGlsZExpbmU7XG5cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd3aGl0ZXNwYWNlJyB8fCBjaGlsZC50eXBlID09PSAnXFxuJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChjaGlsZC50eXBlID09PSAnPycpIHtcbiAgICAgIGlmIChpc011bHRpbGluZSkge1xuICAgICAgICBwYXJ0cy5wdXNoKGluZGVudChjb25jYXQoW2hhcmRsaW5lKCksIGNoaWxkLnRleHQsICcgJ10pKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwYXJ0cy5wdXNoKCcgJywgY2hpbGQudGV4dCwgJyAnKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNoaWxkLnR5cGUgPT09ICc6Jykge1xuICAgICAgaWYgKGlzTXVsdGlsaW5lKSB7XG4gICAgICAgIHBhcnRzLnB1c2goaW5kZW50KGNvbmNhdChbaGFyZGxpbmUoKSwgY2hpbGQudGV4dCwgJyAnXSkpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcnRzLnB1c2goJyAnLCBjaGlsZC50ZXh0LCAnICcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBSZWd1bGFyIGNoaWxkIG5vZGUgLSBqdXN0IGFkZCBpdCwgaW5kZW50YXRpb24gaGFuZGxlZCBieSA/IGFuZCA6IGFib3ZlXG4gICAgICBwYXJ0cy5wdXNoKHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjb25jYXQocGFydHMpO1xufVxuXG5mdW5jdGlvbiBwcmludEluZGV4RXhwcmVzc2lvbihub2RlOiBUcmVlU2l0dGVyLk5vZGUsIG9wdGlvbnM6IFJlcXVpcmVkPEZvcm1hdE9wdGlvbnM+KTogRG9jIHtcbiAgY29uc3QgcGFydHM6IERvY1tdID0gW107XG5cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd3aGl0ZXNwYWNlJyB8fCBjaGlsZC50eXBlID09PSAnXFxuJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHBhcnRzLnB1c2gocHJpbnROb2RlKGNoaWxkLCBvcHRpb25zKSk7XG4gIH1cblxuICByZXR1cm4gY29uY2F0KHBhcnRzKTtcbn1cblxuZnVuY3Rpb24gcHJpbnREb3RJbmRleEV4cHJlc3Npb24obm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuICAgIGlmIChjaGlsZC50eXBlID09PSAnd2hpdGVzcGFjZScgfHwgY2hpbGQudHlwZSA9PT0gJ1xcbicpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBwYXJ0cy5wdXNoKHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICB9XG5cbiAgcmV0dXJuIGNvbmNhdChwYXJ0cyk7XG59XG5cbmZ1bmN0aW9uIHByaW50UGFyZW50aGVzaXplZEV4cHJlc3Npb24obm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFsnKCddO1xuXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuICAgIGlmIChjaGlsZC50eXBlID09PSAnKCcgfHwgY2hpbGQudHlwZSA9PT0gJyknKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd3aGl0ZXNwYWNlJyB8fCBjaGlsZC50eXBlID09PSAnXFxuJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHBhcnRzLnB1c2gocHJpbnROb2RlKGNoaWxkLCBvcHRpb25zKSk7XG4gIH1cblxuICBwYXJ0cy5wdXNoKCcpJyk7XG4gIHJldHVybiBjb25jYXQocGFydHMpO1xufVxuXG5mdW5jdGlvbiBwcmludFVzZVN0YXRlbWVudChub2RlOiBUcmVlU2l0dGVyLk5vZGUsIG9wdGlvbnM6IFJlcXVpcmVkPEZvcm1hdE9wdGlvbnM+KTogRG9jIHtcbiAgY29uc3QgcGFydHM6IERvY1tdID0gW107XG5cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICd3aGl0ZXNwYWNlJyB8fCBjaGlsZC50eXBlID09PSAnXFxuJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChjaGlsZC50eXBlID09PSAndXNlJykge1xuICAgICAgcGFydHMucHVzaChjaGlsZC50ZXh0LCAnICcpO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ2luY2x1ZGVfcGF0aCcpIHtcbiAgICAgIHBhcnRzLnB1c2goY2hpbGQudGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHBhcnRzLnB1c2gocHJpbnROb2RlKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGNvbmNhdChwYXJ0cyk7XG59XG5cbmZ1bmN0aW9uIHByaW50QXNzZXJ0KG5vZGU6IFRyZWVTaXR0ZXIuTm9kZSwgb3B0aW9uczogUmVxdWlyZWQ8Rm9ybWF0T3B0aW9ucz4pOiBEb2Mge1xuICBjb25zdCBwYXJ0czogRG9jW10gPSBbJ2Fzc2VydCcsICcoJ107XG4gIGNvbnN0IGFyZ3M6IERvY1tdID0gW107XG4gIGxldCBhZnRlclBhcmVuczogRG9jIHwgbnVsbCA9IG51bGw7XG4gIGxldCBzZWVuQ2xvc2VQYXJlbiA9IGZhbHNlO1xuXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuICAgIGlmIChjaGlsZC50eXBlID09PSAnYXNzZXJ0Jykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChjaGlsZC50eXBlID09PSAnd2hpdGVzcGFjZScgfHwgY2hpbGQudHlwZSA9PT0gJ1xcbicpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJygnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKGNoaWxkLnR5cGUgPT09ICcpJykge1xuICAgICAgc2VlbkNsb3NlUGFyZW4gPSB0cnVlO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChjaGlsZC50eXBlID09PSAnOycpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJywnKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSd2ZSBzZWVuIHRoZSBjbG9zaW5nIHBhcmVuLCB0aGlzIGlzIHRoZSBleHByZXNzaW9uIGFmdGVyIGFzc2VydFxuICAgIGlmIChzZWVuQ2xvc2VQYXJlbikge1xuICAgICAgYWZ0ZXJQYXJlbnMgPSBwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBhcmdzLnB1c2gocHJpbnROb2RlKGNoaWxkLCBvcHRpb25zKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gSm9pbiBhcmd1bWVudHMgd2l0aCBjb21tYSBhbmQgc3BhY2VcbiAgcGFydHMucHVzaChqb2luKCcsICcsIGFyZ3MpKTtcbiAgcGFydHMucHVzaCgnKScpO1xuXG4gIC8vIEFkZCBleHByZXNzaW9uIGFmdGVyIGFzc2VydCB3aXRoIGEgc3BhY2VcbiAgaWYgKGFmdGVyUGFyZW5zKSB7XG4gICAgcGFydHMucHVzaCgnICcsIGFmdGVyUGFyZW5zKTtcbiAgfVxuXG4gIHJldHVybiBjb25jYXQocGFydHMpO1xufVxuXG5mdW5jdGlvbiBwcmludE1vZGlmaWVyQ2hhaW4obm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgY2hpbGQgb2Ygbm9kZS5jaGlsZHJlbikge1xuICAgIGlmICghY2hpbGQpIGNvbnRpbnVlO1xuICAgIGlmIChjaGlsZC50eXBlID09PSAnd2hpdGVzcGFjZScgfHwgY2hpbGQudHlwZSA9PT0gJ1xcbicpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ21vZGlmaWVyJykge1xuICAgICAgLy8gTm8gc3BhY2UgYWZ0ZXIgbW9kaWZpZXIgY2hhcmFjdGVycyBsaWtlICUsICMsICEsICpcbiAgICAgIHBhcnRzLnB1c2goY2hpbGQudGV4dCk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlID09PSAnbW9kdWxlX2NhbGwnIHx8IGNoaWxkLnR5cGUgPT09ICdmdW5jdGlvbl9jYWxsJyB8fCBjaGlsZC50eXBlID09PSAndHJhbnNmb3JtX2NoYWluJykge1xuICAgICAgLy8gSnVzdCBhZGQgdGhlIG5vZGUgZGlyZWN0bHksIG5vIHNwYWNlIGJlZm9yZSBpdFxuICAgICAgcGFydHMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydHMucHVzaChwcmludE5vZGUoY2hpbGQsIG9wdGlvbnMpKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29uY2F0KHBhcnRzKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRJbnRlcnNlY3Rpb25Gb3Iobm9kZTogVHJlZVNpdHRlci5Ob2RlLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPik6IERvYyB7XG4gIGNvbnN0IHBhcnRzOiBEb2NbXSA9IFsnaW50ZXJzZWN0aW9uX2ZvcicsICcgJ107XG4gIGxldCBibG9jazogRG9jIHwgbnVsbCA9IG51bGw7XG5cbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKCFjaGlsZCkgY29udGludWU7XG5cbiAgICBpZiAoY2hpbGQudHlwZSA9PT0gJ2ludGVyc2VjdGlvbl9mb3InKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkLnR5cGUgPT09ICdwYXJlbnRoZXNpemVkX2Fzc2lnbm1lbnRzJykge1xuICAgICAgcGFydHMucHVzaChwcmludFBhcmVudGhlc2l6ZWRBc3NpZ25tZW50cyhjaGlsZCwgb3B0aW9ucykpO1xuICAgIH0gZWxzZSBpZiAoY2hpbGQudHlwZSA9PT0gJ2Jsb2NrJyB8fCBjaGlsZC50eXBlID09PSAndW5pb25fYmxvY2snKSB7XG4gICAgICBibG9jayA9IHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmIChjaGlsZC50eXBlICE9PSAnOycgJiYgY2hpbGQudHlwZSAhPT0gJ3doaXRlc3BhY2UnICYmIGNoaWxkLnR5cGUgIT09ICdcXG4nKSB7XG4gICAgICBwYXJ0cy5wdXNoKHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChibG9jaykge1xuICAgIHBhcnRzLnB1c2goJyAnLCBibG9jayk7XG4gIH1cblxuICByZXR1cm4gY29uY2F0KHBhcnRzKTtcbn1cblxuZnVuY3Rpb24gcHJpbnRDaGlsZHJlbihub2RlOiBUcmVlU2l0dGVyLk5vZGUsIG9wdGlvbnM6IFJlcXVpcmVkPEZvcm1hdE9wdGlvbnM+KTogRG9jIHtcbiAgY29uc3QgcGFydHM6IERvY1tdID0gW107XG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBub2RlLmNoaWxkQ291bnQ7IGkrKykge1xuICAgIGNvbnN0IGNoaWxkID0gbm9kZS5jaGlsZChpKTtcbiAgICBpZiAoIWNoaWxkKSBjb250aW51ZTtcbiAgICBwYXJ0cy5wdXNoKHByaW50Tm9kZShjaGlsZCwgb3B0aW9ucykpO1xuICB9XG5cbiAgcmV0dXJuIGNvbmNhdChwYXJ0cyk7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbnNcblxuZnVuY3Rpb24gbmVlZHNTZW1pY29sb24odHlwZTogc3RyaW5nLCBub2RlPzogVHJlZVNpdHRlci5Ob2RlKTogYm9vbGVhbiB7XG4gIGlmICh0eXBlID09PSAnYXNzaWdubWVudCcpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodHlwZSA9PT0gJ2Fzc2VydF9zdGF0ZW1lbnQnIHx8IHR5cGUgPT09ICdhc3NlcnRfZXhwcmVzc2lvbicpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpZiAodHlwZSA9PT0gJ3RyYW5zZm9ybV9jaGFpbicgJiYgbm9kZSkge1xuICAgIC8vIE9ubHkgYWRkIHNlbWljb2xvbiBpZiB0cmFuc2Zvcm0gY2hhaW4gZG9lc24ndCBoYXZlIGEgYmxvY2tcbiAgICBjb25zdCBoYXNCbG9jayA9IGhhc0NoaWxkT2ZUeXBlKG5vZGUsICd1bmlvbl9ibG9jaycpIHx8IGhhc0NoaWxkT2ZUeXBlKG5vZGUsICdibG9jaycpO1xuICAgIHJldHVybiAhaGFzQmxvY2s7XG4gIH1cbiAgaWYgKHR5cGUgPT09ICdtb2RpZmllcl9jaGFpbicgJiYgbm9kZSkge1xuICAgIC8vIE1vZGlmaWVyIGNoYWlucyB3aXRob3V0IGJsb2NrcyBuZWVkIHNlbWljb2xvbnMgKGxpa2UgI3JvdGF0ZSguLi4pIGN5bGluZGVyKC4uLik7KVxuICAgIGNvbnN0IGhhc0Jsb2NrID0gaGFzQ2hpbGRPZlR5cGUobm9kZSwgJ3VuaW9uX2Jsb2NrJykgfHwgaGFzQ2hpbGRPZlR5cGUobm9kZSwgJ2Jsb2NrJyk7XG4gICAgcmV0dXJuICFoYXNCbG9jaztcbiAgfVxuICBpZiAodHlwZSA9PT0gJ21vZHVsZV9kZWNsYXJhdGlvbicgJiYgbm9kZSkge1xuICAgIC8vIE1vZHVsZSBkZWNsYXJhdGlvbnMgd2l0aG91dCBibG9ja3MgbmVlZCBzZW1pY29sb25zXG4gICAgY29uc3QgaGFzQmxvY2sgPSBoYXNDaGlsZE9mVHlwZShub2RlLCAndW5pb25fYmxvY2snKSB8fCBoYXNDaGlsZE9mVHlwZShub2RlLCAnYmxvY2snKTtcbiAgICByZXR1cm4gIWhhc0Jsb2NrO1xuICB9XG4gIGlmICh0eXBlID09PSAnaWZfc3RhdGVtZW50JyB8fCB0eXBlID09PSAnaWZfYmxvY2snKSB7XG4gICAgLy8gSWYgc3RhdGVtZW50cyB3aXRoIGVsc2UgbmVlZCBzZW1pY29sb25zIGhhbmRsZWQgaW4gcHJpbnRJZlN0YXRlbWVudFxuICAgIC8vIElmIHN0YXRlbWVudHMgd2l0aG91dCBlbHNlIGFuZCB3aXRob3V0IGJsb2NrcyBuZWVkIHNlbWljb2xvbnNcbiAgICBpZiAobm9kZSkge1xuICAgICAgY29uc3QgaGFzRWxzZSA9IGhhc0NoaWxkT2ZUeXBlKG5vZGUsICdlbHNlJyk7XG4gICAgICBpZiAoaGFzRWxzZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7IC8vIHByaW50SWZTdGF0ZW1lbnQgaGFuZGxlcyBzZW1pY29sb25zIGZvciBpZi1lbHNlXG4gICAgICB9XG4gICAgICBjb25zdCBoYXNCbG9jayA9IGhhc0NoaWxkT2ZUeXBlKG5vZGUsICd1bmlvbl9ibG9jaycpIHx8IGhhc0NoaWxkT2ZUeXBlKG5vZGUsICdibG9jaycpO1xuICAgICAgcmV0dXJuICFoYXNCbG9jaztcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlID09PSAnZm9yX3N0YXRlbWVudCcgfHwgdHlwZSA9PT0gJ2Zvcl9ibG9jaycpIHtcbiAgICAvLyBGb3Igc3RhdGVtZW50cyBuZWVkIHNlbWljb2xvbnMgaWYgdGhleSBkb24ndCBoYXZlIGJsb2Nrc1xuICAgIGlmIChub2RlKSB7XG4gICAgICBjb25zdCBoYXNCbG9jayA9IGhhc0NoaWxkT2ZUeXBlKG5vZGUsICd1bmlvbl9ibG9jaycpIHx8IGhhc0NoaWxkT2ZUeXBlKG5vZGUsICdibG9jaycpO1xuICAgICAgcmV0dXJuICFoYXNCbG9jaztcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGUgPT09ICdpbnRlcnNlY3Rpb25fZm9yJyB8fCB0eXBlID09PSAnaW50ZXJzZWN0aW9uX2Zvcl9ibG9jaycpIHtcbiAgICAvLyBJbnRlcnNlY3Rpb25fZm9yIHN0YXRlbWVudHMgbmVlZCBzZW1pY29sb25zIGlmIHRoZXkgZG9uJ3QgaGF2ZSBibG9ja3NcbiAgICBpZiAobm9kZSkge1xuICAgICAgY29uc3QgaGFzQmxvY2sgPSBoYXNDaGlsZE9mVHlwZShub2RlLCAndW5pb25fYmxvY2snKSB8fCBoYXNDaGlsZE9mVHlwZShub2RlLCAnYmxvY2snKTtcbiAgICAgIHJldHVybiAhaGFzQmxvY2s7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gaGFzQ2hpbGRPZlR5cGUobm9kZTogVHJlZVNpdHRlci5Ob2RlLCB0eXBlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgZm9yIChjb25zdCBjaGlsZCBvZiBub2RlLmNoaWxkcmVuKSB7XG4gICAgaWYgKGNoaWxkICYmIGNoaWxkLnR5cGUgPT09IHR5cGUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGlzT3BlcmF0b3IodGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBbJysnLCAnLScsICcqJywgJy8nLCAnJScsICc9PScsICchPScsICc8JywgJz4nLCAnPD0nLCAnPj0nLCAnJiYnLCAnfHwnLCAnISddLmluY2x1ZGVzKHRleHQpO1xufVxuXG4vKipcbiAqIENvbnZlcnQgRG9jIElSIHRvIGFjdHVhbCBzdHJpbmcgb3V0cHV0XG4gKi9cbmZ1bmN0aW9uIHByaW50RG9jKGRvYzogRG9jLCBvcHRpb25zOiBSZXF1aXJlZDxGb3JtYXRPcHRpb25zPiwgbW9kZTogJ2ZsYXQnIHwgJ2JyZWFrJyA9ICdicmVhaycpOiBzdHJpbmcge1xuICBjb25zdCBpbmRlbnRTdHIgPSBvcHRpb25zLnVzZVRhYnMgPyAnXFx0JyA6ICcgJy5yZXBlYXQob3B0aW9ucy5pbmRlbnRTaXplKTtcbiAgbGV0IG91dHB1dCA9ICcnO1xuICBsZXQgaW5kZW50TGV2ZWwgPSAwO1xuXG4gIGZ1bmN0aW9uIHByaW50KGQ6IERvYywgbTogJ2ZsYXQnIHwgJ2JyZWFrJyA9IG1vZGUpOiB2b2lkIHtcbiAgICBpZiAodHlwZW9mIGQgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvdXRwdXQgKz0gZDtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShkKSkge1xuICAgICAgZm9yIChjb25zdCBwYXJ0IG9mIGQpIHtcbiAgICAgICAgcHJpbnQocGFydCwgbSk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3dpdGNoIChkLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NvbmNhdCc6XG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBkLnBhcnRzKSB7XG4gICAgICAgICAgcHJpbnQocGFydCwgbSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2xpbmUnOlxuICAgICAgICBpZiAoZC5oYXJkIHx8IG0gPT09ICdicmVhaycpIHtcbiAgICAgICAgICBvdXRwdXQgKz0gJ1xcbicgKyBpbmRlbnRTdHIucmVwZWF0KGluZGVudExldmVsKTtcbiAgICAgICAgfSBlbHNlIGlmICghZC5zb2Z0KSB7XG4gICAgICAgICAgb3V0cHV0ICs9ICcgJztcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnZ3JvdXAnOlxuICAgICAgICBwcmludChkLmNvbnRlbnRzLCBkLnNob3VsZEJyZWFrID8gJ2JyZWFrJyA6ICdmbGF0Jyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdpbmRlbnQnOlxuICAgICAgICBpbmRlbnRMZXZlbCsrO1xuICAgICAgICBwcmludChkLmNvbnRlbnRzLCBtKTtcbiAgICAgICAgaW5kZW50TGV2ZWwtLTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2lmLWJyZWFrJzpcbiAgICAgICAgcHJpbnQobSA9PT0gJ2JyZWFrJyA/IGQuYnJlYWtDb250ZW50cyA6IGQuZmxhdENvbnRlbnRzLCBtKTtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgJ2ZpbGwnOlxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgZC5wYXJ0cykge1xuICAgICAgICAgIHByaW50KHBhcnQsIG0pO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHByaW50KGRvYyk7XG5cbiAgLy8gUmVtb3ZlIHRyYWlsaW5nIHdoaXRlc3BhY2UgZnJvbSBlYWNoIGxpbmUgYW5kIGVuc3VyZSBzaW5nbGUgdHJhaWxpbmcgbmV3bGluZVxuICBsZXQgcmVzdWx0ID0gb3V0cHV0LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW1FbmQoKSkuam9pbignXFxuJyk7XG5cbiAgLy8gRW5zdXJlIGV4YWN0bHkgb25lIHRyYWlsaW5nIG5ld2xpbmUgKGFsbCB0ZXh0IGZpbGVzIHNob3VsZCBlbmQgd2l0aCBuZXdsaW5lKVxuICAvLyBVbmxlc3MgdGhlIHJlc3VsdCBpcyBlbXB0eVxuICBpZiAocmVzdWx0LnRyaW0oKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoL1xcbiokLywgJ1xcbicpO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iXSwidmVyc2lvbiI6M30=